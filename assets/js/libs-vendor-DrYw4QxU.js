function Jt(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let dt=Jt();function Te(e){dt=e}const Re=/[&<>"']/,sn=new RegExp(Re.source,"g"),Le=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,on=new RegExp(Le.source,"g"),an={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},fe=e=>an[e];function X(e,t){if(t){if(Re.test(e))return e.replace(sn,fe)}else if(Le.test(e))return e.replace(on,fe);return e}const ln=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function cn(e){return e.replace(ln,(t,n)=>(n=n.toLowerCase(),n==="colon"?":":n.charAt(0)==="#"?n.charAt(1)==="x"?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):""))}const un=/(^|[^\[])\^/g;function I(e,t){e=typeof e=="string"?e:e.source,t=t||"";const n={replace:(r,s)=>(s=typeof s=="object"&&"source"in s?s.source:s,s=s.replace(un,"$1"),e=e.replace(r,s),n),getRegex:()=>new RegExp(e,t)};return n}function he(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}const Rt={exec:()=>null};function de(e,t){const n=e.replace(/\|/g,(o,i,l)=>{let a=!1,c=i;for(;--c>=0&&l[c]==="\\";)a=!a;return a?"|":" |"}),r=n.split(/ \|/);let s=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),t)if(r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;s<r.length;s++)r[s]=r[s].trim().replace(/\\\|/g,"|");return r}function Mt(e,t,n){const r=e.length;if(r===0)return"";let s=0;for(;s<r&&e.charAt(r-s-1)===t;)s++;return e.slice(0,r-s)}function fn(e,t){if(e.indexOf(t[1])===-1)return-1;let n=0;for(let r=0;r<e.length;r++)if(e[r]==="\\")r++;else if(e[r]===t[0])n++;else if(e[r]===t[1]&&(n--,n<0))return r;return-1}function pe(e,t,n,r){const s=t.href,o=t.title?X(t.title):null,i=e[1].replace(/\\([\[\]])/g,"$1");if(e[0].charAt(0)!=="!"){r.state.inLink=!0;const l={type:"link",raw:n,href:s,title:o,text:i,tokens:r.inlineTokens(i)};return r.state.inLink=!1,l}return{type:"image",raw:n,href:s,title:o,text:X(i)}}function hn(e,t){const n=e.match(/^(\s+)(?:```)/);if(n===null)return t;const r=n[1];return t.split(`
`).map(s=>{const o=s.match(/^\s+/);if(o===null)return s;const[i]=o;return i.length>=r.length?s.slice(r.length):s}).join(`
`)}class Lt{options;rules;lexer;constructor(t){this.options=t||dt}space(t){const n=this.rules.block.newline.exec(t);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(t){const n=this.rules.block.code.exec(t);if(n){const r=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?r:Mt(r,`
`)}}}fences(t){const n=this.rules.block.fences.exec(t);if(n){const r=n[0],s=hn(r,n[3]||"");return{type:"code",raw:r,lang:n[2]?n[2].trim().replace(this.rules.inline._escapes,"$1"):n[2],text:s}}}heading(t){const n=this.rules.block.heading.exec(t);if(n){let r=n[2].trim();if(/#$/.test(r)){const s=Mt(r,"#");(this.options.pedantic||!s||/ $/.test(s))&&(r=s.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(t){const n=this.rules.block.hr.exec(t);if(n)return{type:"hr",raw:n[0]}}blockquote(t){const n=this.rules.block.blockquote.exec(t);if(n){const r=Mt(n[0].replace(/^ *>[ \t]?/gm,""),`
`),s=this.lexer.state.top;this.lexer.state.top=!0;const o=this.lexer.blockTokens(r);return this.lexer.state.top=s,{type:"blockquote",raw:n[0],tokens:o,text:r}}}list(t){let n=this.rules.block.list.exec(t);if(n){let r=n[1].trim();const s=r.length>1,o={type:"list",raw:"",ordered:s,start:s?+r.slice(0,-1):"",loose:!1,items:[]};r=s?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=s?r:"[*+-]");const i=new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`);let l="",a="",c=!1;for(;t;){let u=!1;if(!(n=i.exec(t))||this.rules.block.hr.test(t))break;l=n[0],t=t.substring(l.length);let f=n[2].split(`
`,1)[0].replace(/^\t+/,y=>" ".repeat(3*y.length)),h=t.split(`
`,1)[0],m=0;this.options.pedantic?(m=2,a=f.trimStart()):(m=n[2].search(/[^ ]/),m=m>4?1:m,a=f.slice(m),m+=n[1].length);let g=!1;if(!f&&/^ *$/.test(h)&&(l+=h+`
`,t=t.substring(h.length+1),u=!0),!u){const y=new RegExp(`^ {0,${Math.min(3,m-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),b=new RegExp(`^ {0,${Math.min(3,m-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),S=new RegExp(`^ {0,${Math.min(3,m-1)}}(?:\`\`\`|~~~)`),A=new RegExp(`^ {0,${Math.min(3,m-1)}}#`);for(;t;){const C=t.split(`
`,1)[0];if(h=C,this.options.pedantic&&(h=h.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),S.test(h)||A.test(h)||y.test(h)||b.test(t))break;if(h.search(/[^ ]/)>=m||!h.trim())a+=`
`+h.slice(m);else{if(g||f.search(/[^ ]/)>=4||S.test(f)||A.test(f)||b.test(f))break;a+=`
`+h}!g&&!h.trim()&&(g=!0),l+=C+`
`,t=t.substring(C.length+1),f=h.slice(m)}}o.loose||(c?o.loose=!0:/\n *\n *$/.test(l)&&(c=!0));let p=null,d;this.options.gfm&&(p=/^\[[ xX]\] /.exec(a),p&&(d=p[0]!=="[ ] ",a=a.replace(/^\[[ xX]\] +/,""))),o.items.push({type:"list_item",raw:l,task:!!p,checked:d,loose:!1,text:a,tokens:[]}),o.raw+=l}o.items[o.items.length-1].raw=l.trimEnd(),o.items[o.items.length-1].text=a.trimEnd(),o.raw=o.raw.trimEnd();for(let u=0;u<o.items.length;u++)if(this.lexer.state.top=!1,o.items[u].tokens=this.lexer.blockTokens(o.items[u].text,[]),!o.loose){const f=o.items[u].tokens.filter(m=>m.type==="space"),h=f.length>0&&f.some(m=>/\n.*\n/.test(m.raw));o.loose=h}if(o.loose)for(let u=0;u<o.items.length;u++)o.items[u].loose=!0;return o}}html(t){const n=this.rules.block.html.exec(t);if(n)return{type:"html",block:!0,raw:n[0],pre:n[1]==="pre"||n[1]==="script"||n[1]==="style",text:n[0]}}def(t){const n=this.rules.block.def.exec(t);if(n){const r=n[1].toLowerCase().replace(/\s+/g," "),s=n[2]?n[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",o=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline._escapes,"$1"):n[3];return{type:"def",tag:r,raw:n[0],href:s,title:o}}}table(t){const n=this.rules.block.table.exec(t);if(n){if(!/[:|]/.test(n[2]))return;const r={type:"table",raw:n[0],header:de(n[1]).map(s=>({text:s,tokens:[]})),align:n[2].replace(/^\||\| *$/g,"").split("|"),rows:n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(r.header.length===r.align.length){let s=r.align.length,o,i,l,a;for(o=0;o<s;o++){const c=r.align[o];c&&(/^ *-+: *$/.test(c)?r.align[o]="right":/^ *:-+: *$/.test(c)?r.align[o]="center":/^ *:-+ *$/.test(c)?r.align[o]="left":r.align[o]=null)}for(s=r.rows.length,o=0;o<s;o++)r.rows[o]=de(r.rows[o],r.header.length).map(c=>({text:c,tokens:[]}));for(s=r.header.length,i=0;i<s;i++)r.header[i].tokens=this.lexer.inline(r.header[i].text);for(s=r.rows.length,i=0;i<s;i++)for(a=r.rows[i],l=0;l<a.length;l++)a[l].tokens=this.lexer.inline(a[l].text);return r}}}lheading(t){const n=this.rules.block.lheading.exec(t);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(t){const n=this.rules.block.paragraph.exec(t);if(n){const r=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:r,tokens:this.lexer.inline(r)}}}text(t){const n=this.rules.block.text.exec(t);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(t){const n=this.rules.inline.escape.exec(t);if(n)return{type:"escape",raw:n[0],text:X(n[1])}}tag(t){const n=this.rules.inline.tag.exec(t);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(t){const n=this.rules.inline.link.exec(t);if(n){const r=n[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;const i=Mt(r.slice(0,-1),"\\");if((r.length-i.length)%2===0)return}else{const i=fn(n[2],"()");if(i>-1){const a=(n[0].indexOf("!")===0?5:4)+n[1].length+i;n[2]=n[2].substring(0,i),n[0]=n[0].substring(0,a).trim(),n[3]=""}}let s=n[2],o="";if(this.options.pedantic){const i=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(s);i&&(s=i[1],o=i[3])}else o=n[3]?n[3].slice(1,-1):"";return s=s.trim(),/^</.test(s)&&(this.options.pedantic&&!/>$/.test(r)?s=s.slice(1):s=s.slice(1,-1)),pe(n,{href:s&&s.replace(this.rules.inline._escapes,"$1"),title:o&&o.replace(this.rules.inline._escapes,"$1")},n[0],this.lexer)}}reflink(t,n){let r;if((r=this.rules.inline.reflink.exec(t))||(r=this.rules.inline.nolink.exec(t))){let s=(r[2]||r[1]).replace(/\s+/g," ");if(s=n[s.toLowerCase()],!s){const o=r[0].charAt(0);return{type:"text",raw:o,text:o}}return pe(r,s,r[0],this.lexer)}}emStrong(t,n,r=""){let s=this.rules.inline.emStrong.lDelim.exec(t);if(!s||s[3]&&r.match(/[\p{L}\p{N}]/u))return;if(!(s[1]||s[2]||"")||!r||this.rules.inline.punctuation.exec(r)){const i=[...s[0]].length-1;let l,a,c=i,u=0;const f=s[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(f.lastIndex=0,n=n.slice(-1*t.length+i);(s=f.exec(n))!=null;){if(l=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!l)continue;if(a=[...l].length,s[3]||s[4]){c+=a;continue}else if((s[5]||s[6])&&i%3&&!((i+a)%3)){u+=a;continue}if(c-=a,c>0)continue;a=Math.min(a,a+c+u);const h=[...s[0]][0].length,m=t.slice(0,i+s.index+h+a);if(Math.min(i,a)%2){const p=m.slice(1,-1);return{type:"em",raw:m,text:p,tokens:this.lexer.inlineTokens(p)}}const g=m.slice(2,-2);return{type:"strong",raw:m,text:g,tokens:this.lexer.inlineTokens(g)}}}}codespan(t){const n=this.rules.inline.code.exec(t);if(n){let r=n[2].replace(/\n/g," ");const s=/[^ ]/.test(r),o=/^ /.test(r)&&/ $/.test(r);return s&&o&&(r=r.substring(1,r.length-1)),r=X(r,!0),{type:"codespan",raw:n[0],text:r}}}br(t){const n=this.rules.inline.br.exec(t);if(n)return{type:"br",raw:n[0]}}del(t){const n=this.rules.inline.del.exec(t);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(t){const n=this.rules.inline.autolink.exec(t);if(n){let r,s;return n[2]==="@"?(r=X(n[1]),s="mailto:"+r):(r=X(n[1]),s=r),{type:"link",raw:n[0],text:r,href:s,tokens:[{type:"text",raw:r,text:r}]}}}url(t){let n;if(n=this.rules.inline.url.exec(t)){let r,s;if(n[2]==="@")r=X(n[0]),s="mailto:"+r;else{let o;do o=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0];while(o!==n[0]);r=X(n[0]),n[1]==="www."?s="http://"+n[0]:s=n[0]}return{type:"link",raw:n[0],text:r,href:s,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(t){const n=this.rules.inline.text.exec(t);if(n){let r;return this.lexer.state.inRawBlock?r=n[0]:r=X(n[0]),{type:"text",raw:n[0],text:r}}}}const M={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:Rt,lheading:/^(?!bull )((?:.|\n(?!\s*?\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};M._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;M._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;M.def=I(M.def).replace("label",M._label).replace("title",M._title).getRegex();M.bullet=/(?:[*+-]|\d{1,9}[.)])/;M.listItemStart=I(/^( *)(bull) */).replace("bull",M.bullet).getRegex();M.list=I(M.list).replace(/bull/g,M.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+M.def.source+")").getRegex();M._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";M._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;M.html=I(M.html,"i").replace("comment",M._comment).replace("tag",M._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();M.lheading=I(M.lheading).replace(/bull/g,M.bullet).getRegex();M.paragraph=I(M._paragraph).replace("hr",M.hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",M._tag).getRegex();M.blockquote=I(M.blockquote).replace("paragraph",M.paragraph).getRegex();M.normal={...M};M.gfm={...M.normal,table:"^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"};M.gfm.table=I(M.gfm.table).replace("hr",M.hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",M._tag).getRegex();M.gfm.paragraph=I(M._paragraph).replace("hr",M.hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",M.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",M._tag).getRegex();M.pedantic={...M.normal,html:I(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",M._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Rt,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:I(M.normal._paragraph).replace("hr",M.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",M.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const k={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Rt,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,rDelimAst:/^[^_*]*?__[^_*]*?\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\*)[punct](\*+)(?=[\s]|$)|[^punct\s](\*+)(?!\*)(?=[punct\s]|$)|(?!\*)[punct\s](\*+)(?=[^punct\s])|[\s](\*+)(?!\*)(?=[punct])|(?!\*)[punct](\*+)(?!\*)(?=[punct])|[^punct\s](\*+)(?=[^punct\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\s]|$)|[^punct\s](_+)(?!_)(?=[punct\s]|$)|(?!_)[punct\s](_+)(?=[^punct\s])|[\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Rt,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^((?![*_])[\spunctuation])/};k._punctuation="\\p{P}$+<=>`^|~";k.punctuation=I(k.punctuation,"u").replace(/punctuation/g,k._punctuation).getRegex();k.blockSkip=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g;k.anyPunctuation=/\\[punct]/g;k._escapes=/\\([punct])/g;k._comment=I(M._comment).replace("(?:-->|$)","-->").getRegex();k.emStrong.lDelim=I(k.emStrong.lDelim,"u").replace(/punct/g,k._punctuation).getRegex();k.emStrong.rDelimAst=I(k.emStrong.rDelimAst,"gu").replace(/punct/g,k._punctuation).getRegex();k.emStrong.rDelimUnd=I(k.emStrong.rDelimUnd,"gu").replace(/punct/g,k._punctuation).getRegex();k.anyPunctuation=I(k.anyPunctuation,"gu").replace(/punct/g,k._punctuation).getRegex();k._escapes=I(k._escapes,"gu").replace(/punct/g,k._punctuation).getRegex();k._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;k._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;k.autolink=I(k.autolink).replace("scheme",k._scheme).replace("email",k._email).getRegex();k._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;k.tag=I(k.tag).replace("comment",k._comment).replace("attribute",k._attribute).getRegex();k._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;k._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;k._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;k.link=I(k.link).replace("label",k._label).replace("href",k._href).replace("title",k._title).getRegex();k.reflink=I(k.reflink).replace("label",k._label).replace("ref",M._label).getRegex();k.nolink=I(k.nolink).replace("ref",M._label).getRegex();k.reflinkSearch=I(k.reflinkSearch,"g").replace("reflink",k.reflink).replace("nolink",k.nolink).getRegex();k.normal={...k};k.pedantic={...k.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:I(/^!?\[(label)\]\((.*?)\)/).replace("label",k._label).getRegex(),reflink:I(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",k._label).getRegex()};k.gfm={...k.normal,escape:I(k.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/};k.gfm.url=I(k.gfm.url,"i").replace("email",k.gfm._extended_email).getRegex();k.breaks={...k.gfm,br:I(k.br).replace("{2,}","*").getRegex(),text:I(k.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};class G{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||dt,this.options.tokenizer=this.options.tokenizer||new Lt,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={block:M.normal,inline:k.normal};this.options.pedantic?(n.block=M.pedantic,n.inline=k.pedantic):this.options.gfm&&(n.block=M.gfm,this.options.breaks?n.inline=k.breaks:n.inline=k.gfm),this.tokenizer.rules=n}static get rules(){return{block:M,inline:k}}static lex(t,n){return new G(n).lex(t)}static lexInline(t,n){return new G(n).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);let n;for(;n=this.inlineQueue.shift();)this.inlineTokens(n.src,n.tokens);return this.tokens}blockTokens(t,n=[]){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(l,a,c)=>a+"    ".repeat(c.length));let r,s,o,i;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(l=>(r=l.call({lexer:this},t,n))?(t=t.substring(r.raw.length),n.push(r),!0):!1))){if(r=this.tokenizer.space(t)){t=t.substring(r.raw.length),r.raw.length===1&&n.length>0?n[n.length-1].raw+=`
`:n.push(r);continue}if(r=this.tokenizer.code(t)){t=t.substring(r.raw.length),s=n[n.length-1],s&&(s.type==="paragraph"||s.type==="text")?(s.raw+=`
`+r.raw,s.text+=`
`+r.text,this.inlineQueue[this.inlineQueue.length-1].src=s.text):n.push(r);continue}if(r=this.tokenizer.fences(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.heading(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.hr(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.blockquote(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.list(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.html(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.def(t)){t=t.substring(r.raw.length),s=n[n.length-1],s&&(s.type==="paragraph"||s.type==="text")?(s.raw+=`
`+r.raw,s.text+=`
`+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=s.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.lheading(t)){t=t.substring(r.raw.length),n.push(r);continue}if(o=t,this.options.extensions&&this.options.extensions.startBlock){let l=1/0;const a=t.slice(1);let c;this.options.extensions.startBlock.forEach(u=>{c=u.call({lexer:this},a),typeof c=="number"&&c>=0&&(l=Math.min(l,c))}),l<1/0&&l>=0&&(o=t.substring(0,l+1))}if(this.state.top&&(r=this.tokenizer.paragraph(o))){s=n[n.length-1],i&&s.type==="paragraph"?(s.raw+=`
`+r.raw,s.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):n.push(r),i=o.length!==t.length,t=t.substring(r.raw.length);continue}if(r=this.tokenizer.text(t)){t=t.substring(r.raw.length),s=n[n.length-1],s&&s.type==="text"?(s.raw+=`
`+r.raw,s.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):n.push(r);continue}if(t){const l="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent)break;throw new Error(l)}}return this.state.top=!0,n}inline(t,n=[]){return this.inlineQueue.push({src:t,tokens:n}),n}inlineTokens(t,n=[]){let r,s,o,i=t,l,a,c;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(l=this.tokenizer.rules.inline.reflinkSearch.exec(i))!=null;)u.includes(l[0].slice(l[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,l.index)+"["+"a".repeat(l[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(l=this.tokenizer.rules.inline.blockSkip.exec(i))!=null;)i=i.slice(0,l.index)+"["+"a".repeat(l[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(l=this.tokenizer.rules.inline.anyPunctuation.exec(i))!=null;)i=i.slice(0,l.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(a||(c=""),a=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(r=u.call({lexer:this},t,n))?(t=t.substring(r.raw.length),n.push(r),!0):!1))){if(r=this.tokenizer.escape(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.tag(t)){t=t.substring(r.raw.length),s=n[n.length-1],s&&r.type==="text"&&s.type==="text"?(s.raw+=r.raw,s.text+=r.text):n.push(r);continue}if(r=this.tokenizer.link(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(r.raw.length),s=n[n.length-1],s&&r.type==="text"&&s.type==="text"?(s.raw+=r.raw,s.text+=r.text):n.push(r);continue}if(r=this.tokenizer.emStrong(t,i,c)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.codespan(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.br(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.del(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.autolink(t)){t=t.substring(r.raw.length),n.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(t))){t=t.substring(r.raw.length),n.push(r);continue}if(o=t,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const f=t.slice(1);let h;this.options.extensions.startInline.forEach(m=>{h=m.call({lexer:this},f),typeof h=="number"&&h>=0&&(u=Math.min(u,h))}),u<1/0&&u>=0&&(o=t.substring(0,u+1))}if(r=this.tokenizer.inlineText(o)){t=t.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(c=r.raw.slice(-1)),a=!0,s=n[n.length-1],s&&s.type==="text"?(s.raw+=r.raw,s.text+=r.text):n.push(r);continue}if(t){const u="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent)break;throw new Error(u)}}return n}}class It{options;constructor(t){this.options=t||dt}code(t,n,r){var o;const s=(o=(n||"").match(/^\S*/))==null?void 0:o[0];return t=t.replace(/\n$/,"")+`
`,s?'<pre><code class="language-'+X(s)+'">'+(r?t:X(t,!0))+`</code></pre>
`:"<pre><code>"+(r?t:X(t,!0))+`</code></pre>
`}blockquote(t){return`<blockquote>
${t}</blockquote>
`}html(t,n){return t}heading(t,n,r){return`<h${n}>${t}</h${n}>
`}hr(){return`<hr>
`}list(t,n,r){const s=n?"ol":"ul",o=n&&r!==1?' start="'+r+'"':"";return"<"+s+o+`>
`+t+"</"+s+`>
`}listitem(t,n,r){return`<li>${t}</li>
`}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(t){return`<p>${t}</p>
`}table(t,n){return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+n+`</table>
`}tablerow(t){return`<tr>
${t}</tr>
`}tablecell(t,n){const r=n.header?"th":"td";return(n.align?`<${r} align="${n.align}">`:`<${r}>`)+t+`</${r}>
`}strong(t){return`<strong>${t}</strong>`}em(t){return`<em>${t}</em>`}codespan(t){return`<code>${t}</code>`}br(){return"<br>"}del(t){return`<del>${t}</del>`}link(t,n,r){const s=he(t);if(s===null)return r;t=s;let o='<a href="'+t+'"';return n&&(o+=' title="'+n+'"'),o+=">"+r+"</a>",o}image(t,n,r){const s=he(t);if(s===null)return r;t=s;let o=`<img src="${t}" alt="${r}"`;return n&&(o+=` title="${n}"`),o+=">",o}text(t){return t}}class te{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,n,r){return""+r}image(t,n,r){return""+r}br(){return""}}class J{options;renderer;textRenderer;constructor(t){this.options=t||dt,this.options.renderer=this.options.renderer||new It,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new te}static parse(t,n){return new J(n).parse(t)}static parseInline(t,n){return new J(n).parseInline(t)}parse(t,n=!0){let r="";for(let s=0;s<t.length;s++){const o=t[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]){const i=o,l=this.options.extensions.renderers[i.type].call({parser:this},i);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(i.type)){r+=l||"";continue}}switch(o.type){case"space":continue;case"hr":{r+=this.renderer.hr();continue}case"heading":{const i=o;r+=this.renderer.heading(this.parseInline(i.tokens),i.depth,cn(this.parseInline(i.tokens,this.textRenderer)));continue}case"code":{const i=o;r+=this.renderer.code(i.text,i.lang,!!i.escaped);continue}case"table":{const i=o;let l="",a="";for(let u=0;u<i.header.length;u++)a+=this.renderer.tablecell(this.parseInline(i.header[u].tokens),{header:!0,align:i.align[u]});l+=this.renderer.tablerow(a);let c="";for(let u=0;u<i.rows.length;u++){const f=i.rows[u];a="";for(let h=0;h<f.length;h++)a+=this.renderer.tablecell(this.parseInline(f[h].tokens),{header:!1,align:i.align[h]});c+=this.renderer.tablerow(a)}r+=this.renderer.table(l,c);continue}case"blockquote":{const i=o,l=this.parse(i.tokens);r+=this.renderer.blockquote(l);continue}case"list":{const i=o,l=i.ordered,a=i.start,c=i.loose;let u="";for(let f=0;f<i.items.length;f++){const h=i.items[f],m=h.checked,g=h.task;let p="";if(h.task){const d=this.renderer.checkbox(!!m);c?h.tokens.length>0&&h.tokens[0].type==="paragraph"?(h.tokens[0].text=d+" "+h.tokens[0].text,h.tokens[0].tokens&&h.tokens[0].tokens.length>0&&h.tokens[0].tokens[0].type==="text"&&(h.tokens[0].tokens[0].text=d+" "+h.tokens[0].tokens[0].text)):h.tokens.unshift({type:"text",text:d+" "}):p+=d+" "}p+=this.parse(h.tokens,c),u+=this.renderer.listitem(p,g,!!m)}r+=this.renderer.list(u,l,a);continue}case"html":{const i=o;r+=this.renderer.html(i.text,i.block);continue}case"paragraph":{const i=o;r+=this.renderer.paragraph(this.parseInline(i.tokens));continue}case"text":{let i=o,l=i.tokens?this.parseInline(i.tokens):i.text;for(;s+1<t.length&&t[s+1].type==="text";)i=t[++s],l+=`
`+(i.tokens?this.parseInline(i.tokens):i.text);r+=n?this.renderer.paragraph(l):l;continue}default:{const i='Token with "'+o.type+'" type was not found.';if(this.options.silent)return"";throw new Error(i)}}}return r}parseInline(t,n){n=n||this.renderer;let r="";for(let s=0;s<t.length;s++){const o=t[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]){const i=this.options.extensions.renderers[o.type].call({parser:this},o);if(i!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){r+=i||"";continue}}switch(o.type){case"escape":{const i=o;r+=n.text(i.text);break}case"html":{const i=o;r+=n.html(i.text);break}case"link":{const i=o;r+=n.link(i.href,i.title,this.parseInline(i.tokens,n));break}case"image":{const i=o;r+=n.image(i.href,i.title,i.text);break}case"strong":{const i=o;r+=n.strong(this.parseInline(i.tokens,n));break}case"em":{const i=o;r+=n.em(this.parseInline(i.tokens,n));break}case"codespan":{const i=o;r+=n.codespan(i.text);break}case"br":{r+=n.br();break}case"del":{const i=o;r+=n.del(this.parseInline(i.tokens,n));break}case"text":{const i=o;r+=n.text(i.text);break}default:{const i='Token with "'+o.type+'" type was not found.';if(this.options.silent)return"";throw new Error(i)}}}return r}}class _t{options;constructor(t){this.options=t||dt}static passThroughHooks=new Set(["preprocess","postprocess"]);preprocess(t){return t}postprocess(t){return t}}class dn{defaults=Jt();options=this.setOptions;parse=this.#t(G.lex,J.parse);parseInline=this.#t(G.lexInline,J.parseInline);Parser=J;Renderer=It;TextRenderer=te;Lexer=G;Tokenizer=Lt;Hooks=_t;constructor(...t){this.use(...t)}walkTokens(t,n){var s,o;let r=[];for(const i of t)switch(r=r.concat(n.call(this,i)),i.type){case"table":{const l=i;for(const a of l.header)r=r.concat(this.walkTokens(a.tokens,n));for(const a of l.rows)for(const c of a)r=r.concat(this.walkTokens(c.tokens,n));break}case"list":{const l=i;r=r.concat(this.walkTokens(l.items,n));break}default:{const l=i;(o=(s=this.defaults.extensions)==null?void 0:s.childTokens)!=null&&o[l.type]?this.defaults.extensions.childTokens[l.type].forEach(a=>{r=r.concat(this.walkTokens(l[a],n))}):l.tokens&&(r=r.concat(this.walkTokens(l.tokens,n)))}}return r}use(...t){const n=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(r=>{const s={...r};if(s.async=this.defaults.async||s.async||!1,r.extensions&&(r.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if("renderer"in o){const i=n.renderers[o.name];i?n.renderers[o.name]=function(...l){let a=o.renderer.apply(this,l);return a===!1&&(a=i.apply(this,l)),a}:n.renderers[o.name]=o.renderer}if("tokenizer"in o){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const i=n[o.level];i?i.unshift(o.tokenizer):n[o.level]=[o.tokenizer],o.start&&(o.level==="block"?n.startBlock?n.startBlock.push(o.start):n.startBlock=[o.start]:o.level==="inline"&&(n.startInline?n.startInline.push(o.start):n.startInline=[o.start]))}"childTokens"in o&&o.childTokens&&(n.childTokens[o.name]=o.childTokens)}),s.extensions=n),r.renderer){const o=this.defaults.renderer||new It(this.defaults);for(const i in r.renderer){const l=r.renderer[i],a=i,c=o[a];o[a]=(...u)=>{let f=l.apply(o,u);return f===!1&&(f=c.apply(o,u)),f||""}}s.renderer=o}if(r.tokenizer){const o=this.defaults.tokenizer||new Lt(this.defaults);for(const i in r.tokenizer){const l=r.tokenizer[i],a=i,c=o[a];o[a]=(...u)=>{let f=l.apply(o,u);return f===!1&&(f=c.apply(o,u)),f}}s.tokenizer=o}if(r.hooks){const o=this.defaults.hooks||new _t;for(const i in r.hooks){const l=r.hooks[i],a=i,c=o[a];_t.passThroughHooks.has(i)?o[a]=u=>{if(this.defaults.async)return Promise.resolve(l.call(o,u)).then(h=>c.call(o,h));const f=l.call(o,u);return c.call(o,f)}:o[a]=(...u)=>{let f=l.apply(o,u);return f===!1&&(f=c.apply(o,u)),f}}s.hooks=o}if(r.walkTokens){const o=this.defaults.walkTokens,i=r.walkTokens;s.walkTokens=function(l){let a=[];return a.push(i.call(this,l)),o&&(a=a.concat(o.call(this,l))),a}}this.defaults={...this.defaults,...s}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,n){return G.lex(t,n??this.defaults)}parser(t,n){return J.parse(t,n??this.defaults)}#t(t,n){return(r,s)=>{const o={...s},i={...this.defaults,...o};this.defaults.async===!0&&o.async===!1&&(i.silent,i.async=!0);const l=this.#e(!!i.silent,!!i.async);if(typeof r>"u"||r===null)return l(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return l(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(i.hooks&&(i.hooks.options=i),i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(r):r).then(a=>t(a,i)).then(a=>i.walkTokens?Promise.all(this.walkTokens(a,i.walkTokens)).then(()=>a):a).then(a=>n(a,i)).then(a=>i.hooks?i.hooks.postprocess(a):a).catch(l);try{i.hooks&&(r=i.hooks.preprocess(r));const a=t(r,i);i.walkTokens&&this.walkTokens(a,i.walkTokens);let c=n(a,i);return i.hooks&&(c=i.hooks.postprocess(c)),c}catch(a){return l(a)}}}#e(t,n){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const s="<p>An error occurred:</p><pre>"+X(r.message+"",!0)+"</pre>";return n?Promise.resolve(s):s}if(n)return Promise.reject(r);throw r}}}const ht=new dn;function F(e,t){return ht.parse(e,t)}F.options=F.setOptions=function(e){return ht.setOptions(e),F.defaults=ht.defaults,Te(F.defaults),F};F.getDefaults=Jt;F.defaults=dt;F.use=function(...e){return ht.use(...e),F.defaults=ht.defaults,Te(F.defaults),F};F.walkTokens=function(e,t){return ht.walkTokens(e,t)};F.parseInline=ht.parseInline;F.Parser=J;F.parser=J.parse;F.Renderer=It;F.TextRenderer=te;F.Lexer=G;F.lexer=G.lex;F.Tokenizer=Lt;F.Hooks=_t;F.parse=F;F.options;F.setOptions;F.use;F.walkTokens;F.parseInline;const ws=F;J.parse;G.lex;var w={image:new Map,background:new Map,resource:new Map,defaultStyle:new Map,baseStyle:new Map,computedStyle:new WeakMap,font:new Set,session:{styleMap:new Map,styleCache:new WeakMap,nodeMap:new Map}};function pn(e="soft"){switch(e){case"auto":{w.session.styleMap=new Map,w.session.nodeMap=new Map;return}case"soft":{w.session.styleMap=new Map,w.session.nodeMap=new Map,w.session.styleCache=new WeakMap;return}case"full":return;case"disabled":{w.session.styleMap=new Map,w.session.nodeMap=new Map,w.session.styleCache=new WeakMap,w.computedStyle=new WeakMap,w.baseStyle=new Map,w.defaultStyle=new Map,w.image=new Map,w.background=new Map,w.resource=new Map,w.font=new Set;return}default:{w.session.styleMap=new Map,w.session.nodeMap=new Map,w.session.styleCache=new WeakMap;return}}}function ee(e){const t=e.match(/url\((['"]?)(.*?)(\1)\)/);if(!t)return null;const n=t[2].trim();return n.startsWith("#")?null:n}function mn(e){if(!e||e==="none")return"";let t=e.replace(/translate[XY]?\([^)]*\)/g,"");return t=t.replace(/matrix\(([^)]+)\)/g,(n,r)=>{const s=r.split(",").map(o=>o.trim());return s.length!==6?`matrix(${r})`:(s[4]="0",s[5]="0",`matrix(${s.join(", ")})`)}),t=t.replace(/matrix3d\(([^)]+)\)/g,(n,r)=>{const s=r.split(",").map(o=>o.trim());return s.length!==16?`matrix3d(${r})`:(s[12]="0",s[13]="0",`matrix3d(${s.join(", ")})`)}),t.trim().replace(/\s{2,}/g," ")}function Ft(e){if(/%[0-9A-Fa-f]{2}/.test(e))return e;try{return encodeURI(e)}catch{return e}}function gn(e="[snapDOM]",{ttlMs:t=5*6e4,maxEntries:n=12}={}){const r=new Map;let s=0;function o(i,l,a){if(s>=n)return;const c=Date.now();(r.get(l)||0)>c||(r.set(l,c+t),s++)}return{warnOnce(i,l){o("warn",i,l)},errorOnce(i,l){o("error",i,l)},reset(){r.clear(),s=0}}}var me=gn("[snapDOM]",{ttlMs:3*6e4,maxEntries:10}),Ut=new Map,At=new Map;function yn(e){return/^data:|^blob:|^about:blank$/i.test(e)}function bn(e,t){try{const n=typeof location<"u"&&location.href?location.href:"http://localhost/",r=t.includes("{url}")?t.split("{url}")[0]:t,s=new URL(r||".",n),o=new URL(e,n);if(o.origin===s.origin)return!0;const i=o.searchParams;if(i&&(i.has("url")||i.has("target")))return!0}catch{}return!1}function wn(e,t){if(!t||yn(e)||bn(e,t))return!1;try{const n=typeof location<"u"&&location.href?location.href:"http://localhost/",r=new URL(e,n);return typeof location<"u"?r.origin!==location.origin:!0}catch{return!!t}}function kn(e,t){if(!t)return e;if(t.includes("{url}"))return t.replace("{urlRaw}",Ft(e)).replace("{url}",encodeURIComponent(e));if(/[?&]url=?$/.test(t))return`${t}${encodeURIComponent(e)}`;if(t.endsWith("?"))return`${t}url=${encodeURIComponent(e)}`;if(t.endsWith("/"))return`${t}${Ft(e)}`;const n=t.includes("?")?"&":"?";return`${t}${n}url=${encodeURIComponent(e)}`}function ge(e){return new Promise((t,n)=>{const r=new FileReader;r.onload=()=>t(String(r.result||"")),r.onerror=()=>n(new Error("read_failed")),r.readAsDataURL(e)})}function xn(e,t){return[t.as||"blob",t.timeout??3e3,t.useProxy||"",t.errorTTL??8e3,e].join("|")}async function tt(e,t={}){const n=t.as??"blob",r=t.timeout??3e3,s=t.useProxy||"",o=t.errorTTL??8e3,i=t.headers||{},l=!!t.silent;if(/^data:/i.test(e))try{if(n==="text")return{ok:!0,data:String(e),status:200,url:e,fromCache:!1};if(n==="dataURL")return{ok:!0,data:String(e),status:200,url:e,fromCache:!1,mime:String(e).slice(5).split(";")[0]||""};const[,d="",y=""]=String(e).match(/^data:([^,]*),(.*)$/)||[],S=/;base64/i.test(d)?atob(y):decodeURIComponent(y),A=new Uint8Array([...S].map(_=>_.charCodeAt(0))),C=new Blob([A],{type:(d||"").split(";")[0]||""});return{ok:!0,data:C,status:200,url:e,fromCache:!1,mime:C.type||""}}catch{return{ok:!1,data:null,status:0,url:e,fromCache:!1,reason:"special_url_error"}}if(/^blob:/i.test(e))try{const d=await fetch(e);if(!d.ok)return{ok:!1,data:null,status:d.status,url:e,fromCache:!1,reason:"http_error"};const y=await d.blob(),b=y.type||d.headers.get("content-type")||"";return n==="dataURL"?{ok:!0,data:await ge(y),status:d.status,url:e,fromCache:!1,mime:b}:n==="text"?{ok:!0,data:await y.text(),status:d.status,url:e,fromCache:!1,mime:b}:{ok:!0,data:y,status:d.status,url:e,fromCache:!1,mime:b}}catch{return{ok:!1,data:null,status:0,url:e,fromCache:!1,reason:"network"}}if(/^about:blank$/i.test(e))return n==="dataURL"?{ok:!0,data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGMAAQAABQABDQottAAAAABJRU5ErkJggg==",status:200,url:e,fromCache:!1,mime:"image/png"}:{ok:!0,data:n==="text"?"":new Blob([]),status:200,url:e,fromCache:!1};const a=xn(e,{as:n,timeout:r,useProxy:s,errorTTL:o}),c=At.get(a);if(c&&c.until>Date.now())return{...c.result,fromCache:!0};c&&At.delete(a);const u=Ut.get(a);if(u)return u;const f=wn(e,s)?kn(e,s):e;let h=t.credentials;if(!h)try{const d=typeof location<"u"&&location.href?location.href:"http://localhost/",y=new URL(e,d);h=typeof location<"u"&&y.origin===location.origin?"include":"omit"}catch{h="omit"}const m=new AbortController,g=setTimeout(()=>m.abort("timeout"),r),p=(async()=>{try{const d=await fetch(f,{signal:m.signal,credentials:h,headers:i});if(!d.ok){const S={ok:!1,data:null,status:d.status,url:f,fromCache:!1,reason:"http_error"};if(o>0&&At.set(a,{until:Date.now()+o,result:S}),!l){const A=`${d.status} ${d.statusText||""}`.trim();me.warnOnce(`http:${d.status}:${n}:${new URL(e,(location==null?void 0:location.href)??"http://localhost/").origin}`,`HTTP error ${A} while fetching ${n} ${e}`)}return t.onError&&t.onError(S),S}if(n==="text")return{ok:!0,data:await d.text(),status:d.status,url:f,fromCache:!1};const y=await d.blob(),b=y.type||d.headers.get("content-type")||"";return n==="dataURL"?{ok:!0,data:await ge(y),status:d.status,url:f,fromCache:!1,mime:b}:{ok:!0,data:y,status:d.status,url:f,fromCache:!1,mime:b}}catch(d){const y=d&&typeof d=="object"&&"name"in d&&d.name==="AbortError"?String(d.message||"").includes("timeout")?"timeout":"abort":"network",b={ok:!1,data:null,status:0,url:f,fromCache:!1,reason:y};if(!/^blob:/i.test(e)&&o>0&&At.set(a,{until:Date.now()+o,result:b}),!l){const S=`${y}:${n}:${new URL(e,(location==null?void 0:location.href)??"http://localhost/").origin}`,A=y==="timeout"?`Timeout after ${r}ms. Consider increasing timeout or using a proxy for ${e}`:y==="abort"?`Request aborted while fetching ${n} ${e}`:`Network/CORS issue while fetching ${n} ${e}. A proxy may be required`;me.errorOnce(S,A)}return t.onError&&t.onError(b),b}finally{clearTimeout(g),Ut.delete(a)}})();return Ut.set(a,p),p}function ne(e,t){if(!t||!e.width||!e.height)return e;const n=document.createElement("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");return r.fillStyle=t,r.fillRect(0,0,n.width,n.height),r.drawImage(e,0,0),n}async function Ie(e,t={}){if(/^((repeating-)?(linear|radial|conic)-gradient)\(/i.test(e)||e.trim()==="none")return e;const r=ee(e);if(!r)return e;const s=Ft(r);if(w.background.has(s)){const o=w.background.get(s);return o?`url("${o}")`:"none"}try{const o=await tt(s,{as:"dataURL",useProxy:t.useProxy});return o.ok?(w.background.set(s,o.data),`url("${o.data}")`):(w.background.set(s,null),"none")}catch{return w.background.set(s,null),"none"}}var Sn=new Set(["meta","script","noscript","title","link","template"]),re=new Set(["meta","link","style","title","noscript","script","template","g","defs","use","marker","mask","clipPath","pattern","path","polygon","polyline","line","circle","ellipse","rect","filter","lineargradient","radialgradient","stop"]);function $n(e){if(e=String(e).toLowerCase(),re.has(e)){const o={};return w.defaultStyle.set(e,o),o}if(w.defaultStyle.has(e))return w.defaultStyle.get(e);let t=document.getElementById("snapdom-sandbox");t||(t=document.createElement("div"),t.id="snapdom-sandbox",t.setAttribute("data-snapdom-sandbox","true"),t.setAttribute("aria-hidden","true"),t.style.position="absolute",t.style.left="-9999px",t.style.top="-9999px",t.style.width="0px",t.style.height="0px",t.style.overflow="hidden",document.body.appendChild(t));const n=document.createElement(e);n.style.all="initial",t.appendChild(n);const r=getComputedStyle(n),s={};for(let o of r){if(Fe(o))continue;const i=r.getPropertyValue(o);s[o]=i}return t.removeChild(n),w.defaultStyle.set(e,s),s}var Cn=/(?:^|-)(animation|transition)(?:-|$)/i,Mn=/^(--|view-timeline|scroll-timeline|animation-trigger|offset-|position-try|app-region|interactivity|overlay|view-transition|-webkit-locale|-webkit-user-(?:drag|modify)|-webkit-tap-highlight-color|-webkit-text-security)$/i,An=new Set(["cursor","pointer-events","touch-action","user-select","print-color-adjust","speak","reading-flow","reading-order","anchor-name","anchor-scope","container-name","container-type","timeline-scope"]);function Fe(e){const t=String(e).toLowerCase();return!!(An.has(t)||Mn.test(t)||Cn.test(t))}function qt(e,t){if(t=String(t||"").toLowerCase(),re.has(t))return"";const n=[],r=$n(t);for(let[s,o]of Object.entries(e)){if(Fe(s))continue;const i=r[s];o&&o!==i&&n.push(`${s}:${o}`)}return n.sort(),n.join(";")}function vn(e){const t=new Set;return e.nodeType!==Node.ELEMENT_NODE&&e.nodeType!==Node.DOCUMENT_FRAGMENT_NODE?[]:(e.tagName&&t.add(e.tagName.toLowerCase()),typeof e.querySelectorAll=="function"&&e.querySelectorAll("*").forEach(n=>t.add(n.tagName.toLowerCase())),Array.from(t))}function _n(e){const t=new Map;for(let r of e){const s=w.defaultStyle.get(r);if(!s)continue;const o=Object.entries(s).map(([i,l])=>`${i}:${l};`).sort().join("");o&&(t.has(o)||t.set(o,[]),t.get(o).push(r))}let n="";for(let[r,s]of t.entries())n+=`${s.join(",")} { ${r} }
`;return n}function En(e){const t=Array.from(new Set(e.values())).filter(Boolean).sort(),n=new Map;let r=1;for(const s of t)n.set(s,`c${r++}`);return n}function Ne(e,t=null){if(!(e instanceof Element))return window.getComputedStyle(e,t);let n=w.computedStyle.get(e);if(n||(n=new Map,w.computedStyle.set(e,n)),!n.has(t)){const r=window.getComputedStyle(e,t);n.set(t,r)}return n.get(t)}function ye(e){const t={};for(let n of e)t[n]=e.getPropertyValue(n);return t}function Pe(e){const t=[];let n=0,r=0;for(let s=0;s<e.length;s++){const o=e[s];o==="("&&n++,o===")"&&n--,o===","&&n===0&&(t.push(e.slice(r,s).trim()),r=s+1)}return t.push(e.slice(r).trim()),t}function mt(e,{fast:t=!1}={}){if(t)return e();"requestIdleCallback"in window?requestIdleCallback(e,{timeout:50}):setTimeout(e,1)}function ft(){const e=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent:"",t=/^((?!chrome|android).)*safari/i.test(e),n=/AppleWebKit/i.test(e)&&/Mobile/i.test(e)&&!/Safari/i.test(e),r=/(MicroMessenger|wxwork|WeCom|WindowsWechat|MacWechat)/i.test(e);return t||n||r}var be=new WeakMap,jt=new Map,Vt=0;function St(){Vt++}var we=!1;function Tn(e=document.documentElement){var t,n;if(!we){we=!0;try{new MutationObserver(()=>St()).observe(e,{subtree:!0,childList:!0,characterData:!0,attributes:!0})}catch{}try{new MutationObserver(()=>St()).observe(document.head,{subtree:!0,childList:!0,characterData:!0,attributes:!0})}catch{}try{const r=document.fonts;r&&((t=r.addEventListener)==null||t.call(r,"loadingdone",St),(n=r.ready)==null||n.then(()=>St()).catch(()=>{}))}catch{}}}function Rn(e,t={}){const n={},r=e.getPropertyValue("visibility");for(let s=0;s<e.length;s++){const o=e[s];let i=e.getPropertyValue(o);(o==="background-image"||o==="content")&&i.includes("url(")&&!i.includes("data:")&&(i="none"),n[o]=i}if(t.embedFonts){const s=["font-feature-settings","font-variation-settings","font-kerning","font-variant","font-variant-ligatures","font-optical-sizing"];for(const o of s)if(!n[o])try{const i=e.getPropertyValue(o);i&&(n[o]=i)}catch{}}return r==="hidden"&&(n.opacity="0"),n}var ke=new WeakMap;function Ln(e){let t=ke.get(e);return t||(t=Object.entries(e).sort((r,s)=>r[0]<s[0]?-1:r[0]>s[0]?1:0).map(([r,s])=>`${r}:${s}`).join(";"),ke.set(e,t),t)}function In(e,t=null,n={}){const r=be.get(e);if(r&&r.epoch===Vt)return r.snapshot;const s=t||getComputedStyle(e),o=Rn(s,n);return zn(e,s,o),be.set(e,{epoch:Vt,snapshot:o}),o}function Fn(e,t){return e&&e.session&&e.persist?e:e&&(e.styleMap||e.styleCache||e.nodeMap)?{session:e,persist:{snapshotKeyCache:jt,defaultStyle:w.defaultStyle,baseStyle:w.baseStyle,image:w.image,resource:w.resource,background:w.background,font:w.font},options:t||{}}:{session:w.session,persist:{snapshotKeyCache:jt,defaultStyle:w.defaultStyle,baseStyle:w.baseStyle,image:w.image,resource:w.resource,background:w.background,font:w.font},options:e||t||{}}}async function gt(e,t,n,r){var h,m,g;if(e.tagName==="STYLE")return;const s=Fn(n,r),o=s.options&&s.options.cache||"auto";if(o!=="disabled"&&Tn(document.documentElement),o==="disabled"&&!s.session.__bumpedForDisabled&&(St(),jt.clear(),s.session.__bumpedForDisabled=!0),re.has((h=e.tagName)==null?void 0:h.toLowerCase())){const p=(m=e.getAttribute)==null?void 0:m.call(e,"style");p&&t.setAttribute("style",p)}const{session:i,persist:l}=s;i.styleCache.has(e)||i.styleCache.set(e,getComputedStyle(e));const a=i.styleCache.get(e),c=In(e,a,s.options),u=Ln(c);let f=l.snapshotKeyCache.get(u);if(!f){const p=((g=e.tagName)==null?void 0:g.toLowerCase())||"div";f=qt(c,p),l.snapshotKeyCache.set(u,f)}i.styleMap.set(t,f)}function Nn(e){return e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof HTMLIFrameElement||e instanceof SVGElement||e instanceof HTMLObjectElement||e instanceof HTMLEmbedElement}function Pn(e){return e.backgroundImage&&e.backgroundImage!=="none"||e.backgroundColor&&e.backgroundColor!=="rgba(0, 0, 0, 0)"&&e.backgroundColor!=="transparent"||(parseFloat(e.borderTopWidth)||0)>0||(parseFloat(e.borderBottomWidth)||0)>0||(parseFloat(e.paddingTop)||0)>0||(parseFloat(e.paddingBottom)||0)>0?!0:(e.overflowBlock||e.overflowY||"visible")!=="visible"}function Wn(e){const t=e.parentElement;if(!t)return!1;const n=getComputedStyle(t).display||"";return n.includes("flex")||n.includes("grid")}function On(e,t){if(e.textContent&&/\S/.test(e.textContent))return!0;const n=e.firstElementChild,r=e.lastElementChild;if(n&&n.tagName==="BR"||r&&r.tagName==="BR")return!0;const s=e.scrollHeight;if(s===0)return!1;const o=parseFloat(t.paddingTop)||0,i=parseFloat(t.paddingBottom)||0;return s>o+i}function zn(e,t,n){if(e instanceof HTMLElement&&e.style&&e.style.height)return;const r=t.display||"";if(r.includes("flex")||r.includes("grid")||Nn(e))return;const s=t.position;s==="absolute"||s==="fixed"||s==="sticky"||t.transform==="none"&&(Pn(t)||Wn(e)||On(e,t)&&(delete n.height,delete n["block-size"]))}function Bn(e,t){var i,l,a;if(!(e instanceof Element)||!(t instanceof Element))return;const n=(i=e.getAttribute)==null?void 0:i.call(e,"style");let r=!!(n&&n.includes("var("));if(!r&&((l=e.attributes)!=null&&l.length)){const c=e.attributes;for(let u=0;u<c.length;u++){const f=c[u];if(f&&typeof f.value=="string"&&f.value.includes("var(")){r=!0;break}}}if(!r)return;let s;try{s=getComputedStyle(e)}catch{return}const o=e.style;if(o&&o.length)for(let c=0;c<o.length;c++){const u=o[c],f=o.getPropertyValue(u);if(!f||!f.includes("var("))continue;const h=s.getPropertyValue(u);if(h)try{t.style.setProperty(u,h.trim(),o.getPropertyPriority(u))}catch{}}if((a=e.attributes)!=null&&a.length){const c=e.attributes;for(let u=0;u<c.length;u++){const f=c[u];if(!f||typeof f.value!="string"||!f.value.includes("var("))continue;const h=f.name;let m="";try{m=s.getPropertyValue(h)}catch{}if(m)try{t.style.setProperty(h,m.trim())}catch{}}}}function Dt(e,t,n){return Promise.all(e.map(r=>new Promise(s=>{function o(){mt(i=>{(i&&typeof i.timeRemaining=="function"?i.timeRemaining()>0:!0)?t(r,s):o()},{fast:n})}o()})))}function Un(e){return e=e.trim(),!e||/:not\(\s*\[data-sd-slotted\]\s*\)\s*$/.test(e)?e:`${e}:not([data-sd-slotted])`}function Dn(e,t,n=!0){return e.split(",").map(r=>r.trim()).filter(Boolean).map(r=>{if(r.startsWith(":where(")||r.startsWith("@"))return r;const s=n?Un(r):r;return`:where(${t} ${s})`}).join(", ")}function Hn(e,t){return e?(e=e.replace(/:host\(([^)]+)\)/g,(n,r)=>`:where(${t}:is(${r.trim()}))`),e=e.replace(/:host\b/g,`:where(${t})`),e=e.replace(/:host-context\(([^)]+)\)/g,(n,r)=>`:where(:where(${r.trim()}) ${t})`),e=e.replace(/::slotted\(([^)]+)\)/g,(n,r)=>`:where(${t} ${r.trim()})`),e=e.replace(/(^|})(\s*)([^@}{]+){/g,(n,r,s,o)=>{const i=Dn(o,t,!0);return`${r}${s}${i}{`}),e):""}function qn(e){return e.shadowScopeSeq=(e.shadowScopeSeq||0)+1,`s${e.shadowScopeSeq}`}function jn(e){let t="";try{e.querySelectorAll("style").forEach(r=>{t+=(r.textContent||"")+`
`});const n=e.adoptedStyleSheets||[];for(const r of n)try{if(r&&r.cssRules)for(const s of r.cssRules)t+=s.cssText+`
`}catch{}}catch{}return t}function Vn(e,t,n){if(!t)return;const r=document.createElement("style");r.setAttribute("data-sd",n),r.textContent=t,e.insertBefore(r,e.firstChild||null)}function Xn(e,t){try{const n=e.currentSrc||e.src||"";if(!n)return;t.setAttribute("src",n),t.removeAttribute("srcset"),t.removeAttribute("sizes"),t.loading="eager",t.decoding="sync"}catch{}}function Zn(e){const t=new Set;if(!e)return t;const n=/var\(\s*(--[A-Za-z0-9_-]+)\b/g;let r;for(;r=n.exec(e);)t.add(r[1]);return t}function Yn(e,t){try{let r=getComputedStyle(e).getPropertyValue(t).trim();if(r)return r}catch{}try{let r=getComputedStyle(document.documentElement).getPropertyValue(t).trim();if(r)return r}catch{}return""}function Qn(e,t,n){const r=[];for(const s of t){const o=Yn(e,s);o&&r.push(`${s}: ${o};`)}return r.length?`${n}{${r.join("")}}
`:""}function Kn(e){e&&(e.nodeType===Node.ELEMENT_NODE&&e.setAttribute("data-sd-slotted",""),e.querySelectorAll&&e.querySelectorAll("*").forEach(t=>t.setAttribute("data-sd-slotted","")))}async function Gn(e,t=3){const n=()=>{var o;try{return e.contentDocument||((o=e.contentWindow)==null?void 0:o.document)||null}catch{return null}};let r=n(),s=0;for(;s<t&&(!r||!r.body&&!r.documentElement);)await new Promise(o=>setTimeout(o,0)),r=n(),s++;return r&&(r.body||r.documentElement)?r:null}function Jn(e){const t=e.getBoundingClientRect();let n=0,r=0,s=0,o=0;try{const a=getComputedStyle(e);n=parseFloat(a.borderLeftWidth)||0,r=parseFloat(a.borderRightWidth)||0,s=parseFloat(a.borderTopWidth)||0,o=parseFloat(a.borderBottomWidth)||0}catch{}const i=Math.max(0,Math.round(t.width-(n+r))),l=Math.max(0,Math.round(t.height-(s+o)));return{contentWidth:i,contentHeight:l,rect:t}}function tr(e,t,n){const r=e.createElement("style");return r.setAttribute("data-sd-iframe-pin",""),r.textContent=`html, body {margin: 0 !important;padding: 0 !important;width: ${t}px !important;height: ${n}px !important;min-width: ${t}px !important;min-height: ${n}px !important;box-sizing: border-box !important;overflow: hidden !important;background-clip: border-box !important;}`,(e.head||e.documentElement).appendChild(r),()=>{try{r.remove()}catch{}}}async function er(e,t,n){const r=await Gn(e,3);if(!r)throw new Error("iframe document not accessible/ready");const{contentWidth:s,contentHeight:o,rect:i}=Jn(e),l=n==null?void 0:n.snap;if(!l||typeof l.toPng!="function")throw new Error("snapdom.toPng not available in iframe or window");const a={...n,scale:1},c=tr(r,s,o);let u;try{u=await l.toPng(r.documentElement,a)}finally{c()}u.style.display="block",u.style.width=`${s}px`,u.style.height=`${o}px`;const f=document.createElement("div");return t.nodeMap.set(f,e),gt(e,f,t,n),f.style.overflow="hidden",f.style.display="block",f.style.width||(f.style.width=`${Math.round(i.width)}px`),f.style.height||(f.style.height=`${Math.round(i.height)}px`),f.appendChild(u),f}async function Et(e,t,n){var c,u,f,h,m,g;if(!e)throw new Error("Invalid node");const r=new Set;let s=null,o=null;if(e.nodeType===Node.ELEMENT_NODE){const p=(e.localName||e.tagName||"").toLowerCase();if(e.id==="snapdom-sandbox"||e.hasAttribute("data-snapdom-sandbox")||Sn.has(p))return null}if(e.nodeType===Node.TEXT_NODE||e.nodeType!==Node.ELEMENT_NODE)return e.cloneNode(!0);if(e.getAttribute("data-capture")==="exclude"){if(n.excludeMode==="hide"){const p=document.createElement("div"),d=e.getBoundingClientRect();return p.style.cssText=`display:inline-block;width:${d.width}px;height:${d.height}px;visibility:hidden;`,p}else if(n.excludeMode==="remove")return null}if(n.exclude&&Array.isArray(n.exclude))for(const p of n.exclude)try{if((c=e.matches)!=null&&c.call(e,p)){if(n.excludeMode==="hide"){const d=document.createElement("div"),y=e.getBoundingClientRect();return d.style.cssText=`display:inline-block;width:${y.width}px;height:${y.height}px;visibility:hidden;`,d}else if(n.excludeMode==="remove")return null}}catch{}if(typeof n.filter=="function")try{if(!n.filter(e)){if(n.filterMode==="hide"){const p=document.createElement("div"),d=e.getBoundingClientRect();return p.style.cssText=`display:inline-block;width:${d.width}px;height:${d.height}px;visibility:hidden;`,p}else if(n.filterMode==="remove")return null}}catch{}if(e.tagName==="IFRAME"){let p=!1;try{p=!!(e.contentDocument||(u=e.contentWindow)!=null&&u.document)}catch{p=!1}if(p)try{return await er(e,t,n)}catch{}if(n.placeholders){const d=document.createElement("div");return d.style.cssText=`width:${e.offsetWidth}px;height:${e.offsetHeight}px;background-image:repeating-linear-gradient(45deg,#ddd,#ddd 5px,#f9f9f9 5px,#f9f9f9 10px);display:flex;align-items:center;justify-content:center;font-size:12px;color:#555;border:1px solid #aaa;`,gt(e,d,t,n),d}else{const d=e.getBoundingClientRect(),y=document.createElement("div");return y.style.cssText=`display:inline-block;width:${d.width}px;height:${d.height}px;visibility:hidden;`,gt(e,y,t,n),y}}if(e.getAttribute("data-capture")==="placeholder"){const p=e.cloneNode(!1);t.nodeMap.set(p,e),gt(e,p,t,n);const d=document.createElement("div");return d.textContent=e.getAttribute("data-placeholder-text")||"",d.style.cssText="color:#666;font-size:12px;text-align:center;line-height:1.4;padding:0.5em;box-sizing:border-box;",p.appendChild(d),p}if(e.tagName==="CANVAS"){const p=e.toDataURL(),d=document.createElement("img");return d.src=p,d.width=e.width,d.height=e.height,t.nodeMap.set(d,e),gt(e,d,t,n),d}let i;try{if(i=e.cloneNode(!1),Bn(e,i),t.nodeMap.set(i,e),e.tagName==="IMG"){Xn(e,i);try{const p=e.getBoundingClientRect();let d=Math.round(p.width||0),y=Math.round(p.height||0);if(!d||!y){const b=window.getComputedStyle(e),S=parseFloat(b.width)||0,A=parseFloat(b.height)||0,C=parseInt(e.getAttribute("width")||"",10)||0,_=parseInt(e.getAttribute("height")||"",10)||0,U=e.width||e.naturalWidth||0,E=e.height||e.naturalHeight||0;d=Math.round(d||S||C||U||0),y=Math.round(y||A||_||E||0)}d&&(i.dataset.snapdomWidth=String(d)),y&&(i.dataset.snapdomHeight=String(y))}catch{}}}catch(p){throw p}if(e instanceof HTMLTextAreaElement){const p=e.getBoundingClientRect();i.style.width=`${p.width}px`,i.style.height=`${p.height}px`}if(e instanceof HTMLInputElement&&(i.value=e.value,i.setAttribute("value",e.value),e.checked!==void 0&&(i.checked=e.checked,e.checked&&i.setAttribute("checked",""),e.indeterminate&&(i.indeterminate=e.indeterminate))),e instanceof HTMLSelectElement&&(s=e.value),e instanceof HTMLTextAreaElement&&(o=e.value),gt(e,i,t,n),e.shadowRoot){let p=function(E,W){if(E.nodeType===Node.ELEMENT_NODE&&E.tagName==="STYLE")return W(null);Et(E,t,n).then(B=>{W(B||null)}).catch(()=>{W(null)})};try{const E=e.shadowRoot.querySelectorAll("slot");for(const W of E){let B=[];try{B=((f=W.assignedNodes)==null?void 0:f.call(W,{flatten:!0}))||((h=W.assignedNodes)==null?void 0:h.call(W))||[]}catch{B=((m=W.assignedNodes)==null?void 0:m.call(W))||[]}for(const H of B)r.add(H)}}catch{}const d=qn(t),y=`[data-sd="${d}"]`;try{i.setAttribute("data-sd",d)}catch{}const b=jn(e.shadowRoot),S=Hn(b,y),A=Zn(b),C=Qn(e,A,y);Vn(i,C+S,d);const _=document.createDocumentFragment(),U=await Dt(Array.from(e.shadowRoot.childNodes),p,n.fast);_.append(...U.filter(E=>!!E)),i.appendChild(_)}if(e.tagName==="SLOT"){let p=function(A,C){Et(A,t,n).then(_=>{_&&Kn(_),C(_||null)}).catch(()=>{C(null)})};const d=((g=e.assignedNodes)==null?void 0:g.call(e,{flatten:!0}))||[],y=d.length>0?d:Array.from(e.childNodes),b=document.createDocumentFragment(),S=await Dt(Array.from(y),p,n.fast);return b.append(...S.filter(A=>!!A)),b}function l(p,d){if(r.has(p))return d(null);Et(p,t,n).then(y=>{d(y||null)}).catch(()=>{d(null)})}const a=await Dt(Array.from(e.childNodes),l,n.fast);if(i.append(...a.filter(p=>!!p)),s!==null&&i instanceof HTMLSelectElement){i.value=s;for(const p of i.options)p.value===s?p.setAttribute("selected",""):p.removeAttribute("selected")}return o!==null&&i instanceof HTMLTextAreaElement&&(i.textContent=o),i}var nr=[/font\s*awesome/i,/material\s*icons/i,/ionicons/i,/glyphicons/i,/feather/i,/bootstrap\s*icons/i,/remix\s*icons/i,/heroicons/i,/layui/i,/lucide/i],Xt=[];function rr(e){const t=Array.isArray(e)?e:[e];for(const n of t)n instanceof RegExp?Xt.push(n):typeof n=="string"&&Xt.push(new RegExp(n,"i"))}function it(e){const t=typeof e=="string"?e:"",n=[...nr,...Xt];for(const r of n)if(r instanceof RegExp&&r.test(t))return!0;return!!(/icon/i.test(t)||/glyph/i.test(t)||/symbols/i.test(t)||/feather/i.test(t)||/fontawesome/i.test(t))}async function sr(e,t,n,r=32,s="#000"){t=t.replace(/^['"]+|['"]+$/g,"");const o=window.devicePixelRatio||1;try{await document.fonts.ready}catch{}const i=document.createElement("span");i.textContent=e,i.style.position="absolute",i.style.visibility="hidden",i.style.fontFamily=`"${t}"`,i.style.fontWeight=n||"normal",i.style.fontSize=`${r}px`,i.style.lineHeight="1",i.style.whiteSpace="nowrap",i.style.padding="0",i.style.margin="0",document.body.appendChild(i);const l=i.getBoundingClientRect(),a=Math.ceil(l.width),c=Math.ceil(l.height);document.body.removeChild(i);const u=document.createElement("canvas");u.width=Math.max(1,a*o),u.height=Math.max(1,c*o);const f=u.getContext("2d");return f.scale(o,o),f.font=n?`${n} ${r}px "${t}"`:`${r}px "${t}"`,f.textAlign="left",f.textBaseline="top",f.fillStyle=s,f.fillText(e,0,0),{dataUrl:u.toDataURL(),width:a,height:c}}var or=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","emoji","math","fangsong","ui-serif","ui-sans-serif","ui-monospace","ui-rounded"]);function Nt(e){if(!e)return"";for(let t of e.split(",")){let n=t.trim().replace(/^['"]+|['"]+$/g,"");if(n&&!or.has(n.toLowerCase()))return n}return""}function Tt(e){const t=String(e??"400").trim().toLowerCase();if(t==="normal")return 400;if(t==="bold")return 700;const n=parseInt(t,10);return Number.isFinite(n)?Math.min(900,Math.max(100,n)):400}function Zt(e){const t=String(e??"normal").trim().toLowerCase();return t.startsWith("italic")?"italic":t.startsWith("oblique")?"oblique":"normal"}function ir(e){const t=String(e??"100%").match(/(\d+(?:\.\d+)?)\s*%/);return t?Math.max(50,Math.min(200,parseFloat(t[1]))):100}function ar(e){const t=String(e||"400").trim(),n=t.match(/^(\d{2,3})\s+(\d{2,3})$/);if(n){const s=Tt(n[1]),o=Tt(n[2]);return{min:Math.min(s,o),max:Math.max(s,o)}}const r=Tt(t);return{min:r,max:r}}function lr(e){const t=String(e||"normal").trim().toLowerCase();return t==="italic"?{kind:"italic"}:t.startsWith("oblique")?{kind:"oblique"}:{kind:"normal"}}function cr(e){const t=String(e||"100%").trim(),n=t.match(/(\d+(?:\.\d+)?)\s*%\s+(\d+(?:\.\d+)?)\s*%/);if(n){const o=parseFloat(n[1]),i=parseFloat(n[2]);return{min:Math.min(o,i),max:Math.max(o,i)}}const r=t.match(/(\d+(?:\.\d+)?)\s*%/),s=r?parseFloat(r[1]):100;return{min:s,max:s}}function ur(e,t){if(!e)return!1;try{const n=new URL(e,location.href);if(n.origin===location.origin)return!0;const s=n.host.toLowerCase();if(["fonts.googleapis.com","fonts.gstatic.com","use.typekit.net","p.typekit.net","kit.fontawesome.com","use.fontawesome.com"].some(l=>s.endsWith(l)))return!0;const i=(n.pathname+n.search).toLowerCase();if(/\bfont(s)?\b/.test(i)||/\.woff2?(\b|$)/.test(i))return!0;for(const l of t){const a=l.toLowerCase().replace(/\s+/g,"+"),c=l.toLowerCase().replace(/\s+/g,"-");if(i.includes(a)||i.includes(c))return!0}return!1}catch{return!1}}function fr(e){var n;const t=new Set;for(const r of e||[]){const s=(n=String(r).split("__")[0])==null?void 0:n.trim();s&&t.add(s)}return t}function xe(e,t){return e&&e.replace(/url\(\s*(['"]?)([^)'"]+)\1\s*\)/g,(n,r,s)=>{const o=(s||"").trim();if(!o||/^data:|^blob:|^https?:|^file:|^about:/i.test(o))return n;let i=o;try{i=new URL(o,t||location.href).href}catch{}return`url("${i}")`})}var Yt=/@import\s+(?:url\(\s*(['"]?)([^)"']+)\1\s*\)|(['"])([^"']+)\3)([^;]*);/g,We=4;async function hr(e,t,n){if(!e)return e;const r=new Set;function s(l,a){try{return new URL(l,a||location.href).href}catch{return l}}async function o(l,a,c=0){if(c>We)return l;let u="",f=0,h;for(;h=Yt.exec(l);){u+=l.slice(f,h.index),f=Yt.lastIndex;const m=(h[2]||h[4]||"").trim(),g=s(m,a);if(r.has(g))continue;r.add(g);let p="";try{const d=await tt(g,{as:"text",useProxy:n,silent:!0});d.ok&&typeof d.data=="string"&&(p=d.data)}catch{}p?(p=xe(p,g),p=await o(p,g,c+1),u+=`
/* inlined: ${g} */
${p}
`):u+=h[0]}return u+=l.slice(f),u}let i=xe(e,t||location.href);return i=await o(i,t||location.href,0),i}var Oe=/url\((["']?)([^"')]+)\1\)/g,dr=/@font-face[^{}]*\{[^}]*\}/g;function ze(e){if(!e)return[];const t=[],n=e.split(",").map(r=>r.trim()).filter(Boolean);for(const r of n){const s=r.match(/^U\+([0-9A-Fa-f?]+)(?:-([0-9A-Fa-f?]+))?$/);if(!s)continue;const o=s[1],i=s[2],l=a=>{if(!a.includes("?"))return parseInt(a,16);const c=parseInt(a.replace(/\?/g,"0"),16),u=parseInt(a.replace(/\?/g,"F"),16);return[c,u]};if(i){const a=l(o),c=l(i),u=Array.isArray(a)?a[0]:a,f=Array.isArray(c)?c[1]:c;t.push([Math.min(u,f),Math.max(u,f)])}else{const a=l(o);Array.isArray(a)?t.push([a[0],a[1]]):t.push([a,a])}}return t}function Be(e,t){if(!t.length||!e||e.size===0)return!0;for(const n of e)for(const[r,s]of t)if(n>=r&&n<=s)return!0;return!1}function se(e,t){const n=[];if(!e)return n;for(const r of e.matchAll(Oe)){let s=(r[2]||"").trim();if(!(!s||s.startsWith("data:"))){if(!/^https?:/i.test(s))try{s=new URL(s,t||location.href).href}catch{}n.push(s)}}return n}async function Ue(e,t,n=""){var s,o,i,l,a;let r=e;for(const c of e.matchAll(Oe)){const u=ee(c[0]);if(!u)continue;let f=u;if(!f.startsWith("http")&&!f.startsWith("data:"))try{f=new URL(f,t||location.href).href}catch{}if(!it(f)){if((s=w.resource)!=null&&s.has(f)){(o=w.font)==null||o.add(f),r=r.replace(c[0],`url(${w.resource.get(f)})`);continue}if(!((i=w.font)!=null&&i.has(f)))try{const h=await tt(f,{as:"dataURL",useProxy:n,silent:!0});if(h.ok&&typeof h.data=="string"){const m=h.data;(l=w.resource)==null||l.set(f,m),(a=w.font)==null||a.add(f),r=r.replace(c[0],`url(${m})`)}}catch{}}}return r}function pr(e){if(!e.length)return null;const t=(l,a)=>e.some(([c,u])=>!(u<l||c>a)),n=t(0,255)||t(305,305),r=t(256,591)||t(7680,7935),s=t(880,1023),o=t(1024,1279);return t(7840,7929)||t(258,259)||t(416,417)||t(431,432)?"vietnamese":o?"cyrillic":s?"greek":r?"latin-ext":n?"latin":null}function Se(e={}){const t=new Set((e.families||[]).map(s=>String(s).toLowerCase())),n=new Set((e.domains||[]).map(s=>String(s).toLowerCase())),r=new Set((e.subsets||[]).map(s=>String(s).toLowerCase()));return(s,o)=>{if(t.size&&t.has(s.family.toLowerCase()))return!0;if(n.size)for(const i of s.srcUrls)try{if(n.has(new URL(i).host.toLowerCase()))return!0}catch{}if(r.size){const i=pr(o);if(i&&r.has(i))return!0}return!1}}function mr(e){var o,i,l,a,c,u;if(!e)return e;const t=/@font-face[^{}]*\{[^}]*\}/gi,n=new Set,r=[];for(const f of e.match(t)||[]){const h=((o=f.match(/font-family:\s*([^;]+);/i))==null?void 0:o[1])||"",m=Nt(h),g=(((i=f.match(/font-weight:\s*([^;]+);/i))==null?void 0:i[1])||"400").trim(),p=(((l=f.match(/font-style:\s*([^;]+);/i))==null?void 0:l[1])||"normal").trim(),d=(((a=f.match(/font-stretch:\s*([^;]+);/i))==null?void 0:a[1])||"100%").trim(),y=(((c=f.match(/unicode-range:\s*([^;]+);/i))==null?void 0:c[1])||"").trim(),b=(((u=f.match(/src\s*:\s*([^;]+);/i))==null?void 0:u[1])||"").trim(),S=se(b,location.href),A=S.length?S.map(_=>String(_).toLowerCase()).sort().join("|"):b.toLowerCase(),C=[String(m||"").toLowerCase(),g,p,d,y.toLowerCase(),A].join("|");n.has(C)||(n.add(C),r.push(f))}if(r.length===0)return e;let s=0;return e.replace(t,()=>r[s++]||"")}function gr(e,t,n,r){const s=Array.from(e||[]).sort().join("|"),o=t?JSON.stringify({families:(t.families||[]).map(a=>String(a).toLowerCase()).sort(),domains:(t.domains||[]).map(a=>String(a).toLowerCase()).sort(),subsets:(t.subsets||[]).map(a=>String(a).toLowerCase()).sort()}):"",i=(n||[]).map(a=>`${(a.family||"").toLowerCase()}::${a.weight||"normal"}::${a.style||"normal"}::${a.src||""}`).sort().join("|");return`fonts-embed-css::req=${s}::ex=${o}::lf=${i}::px=${r||""}`}async function De(e,t,n,r){let s;try{s=e.cssRules||[]}catch{return}const o=(i,l)=>{try{return new URL(i,l||location.href).href}catch{return i}};for(const i of s){if(i.type===CSSRule.IMPORT_RULE&&i.styleSheet){const l=i.href?o(i.href,t):t;if(r.depth>=We||l&&r.visitedSheets.has(l))continue;l&&r.visitedSheets.add(l);const a={...r,depth:(r.depth||0)+1};await De(i.styleSheet,l,n,a);continue}if(i.type===CSSRule.FONT_FACE_RULE){const l=(i.style.getPropertyValue("font-family")||"").trim(),a=Nt(l);if(!a||it(a))continue;const c=(i.style.getPropertyValue("font-weight")||"400").trim(),u=(i.style.getPropertyValue("font-style")||"normal").trim(),f=(i.style.getPropertyValue("font-stretch")||"100%").trim(),h=(i.style.getPropertyValue("src")||"").trim(),m=(i.style.getPropertyValue("unicode-range")||"").trim();if(!r.faceMatchesRequired(a,u,c,f))continue;const g=ze(m);if(!Be(r.usedCodepoints,g))continue;const p={family:a,weightSpec:c,styleSpec:u,stretchSpec:f,unicodeRange:m,srcRaw:h,srcUrls:se(h,t||location.href),href:t||location.href};if(r.simpleExcluder&&r.simpleExcluder(p,g))continue;if(/url\(/i.test(h)){const d=await Ue(h,t||location.href,r.useProxy);await n(`@font-face{font-family:${a};src:${d};font-style:${u};font-weight:${c};font-stretch:${f};${m?`unicode-range:${m};`:""}}`)}else await n(`@font-face{font-family:${a};src:${h};font-style:${u};font-weight:${c};font-stretch:${f};${m?`unicode-range:${m};`:""}}`)}}}async function yr({required:e,usedCodepoints:t,exclude:n=void 0,localFonts:r=[],useProxy:s=""}={}){var p,d,y,b,S,A,C,_,U,E,W,B,H,et,P,lt,Q,nt;e instanceof Set||(e=new Set),t instanceof Set||(t=new Set);const o=new Map;for(const x of e){const[$,v,T,R]=String(x).split("__");if(!$)continue;const L=o.get($)||[];L.push({w:parseInt(v,10),s:T,st:parseInt(R,10)}),o.set($,L)}function i(x,$,v,T){if(!o.has(x))return!1;const R=o.get(x),L=ar(v),N=lr($),D=cr(T),j=L.min!==L.max,rt=L.min,st=z=>N.kind==="normal"&&z==="normal"||N.kind!=="normal"&&(z==="italic"||z==="oblique");let Z=!1;for(const z of R){const K=j?z.w>=L.min&&z.w<=L.max:z.w===rt,q=st(Zt(z.s)),V=z.st>=D.min&&z.st<=D.max;if(K&&q&&V){Z=!0;break}}if(Z)return!0;if(!j)for(const z of R){const K=st(Zt(z.s)),q=z.st>=D.min&&z.st<=D.max;if(Math.abs(rt-z.w)<=300&&K&&q)return!0}return!1}const l=Se(n),a=gr(e,n,r,s);if((p=w.resource)!=null&&p.has(a))return w.resource.get(a);const c=fr(e),u=[],f=Yt;for(const x of document.querySelectorAll("style")){const $=x.textContent||"";for(const v of $.matchAll(f)){const T=(v[2]||v[4]||"").trim();if(!T||it(T))continue;!!document.querySelector(`link[rel="stylesheet"][href="${T}"]`)||u.push(T)}}u.length&&await Promise.all(u.map(x=>new Promise($=>{if(document.querySelector(`link[rel="stylesheet"][href="${x}"]`))return $(null);const v=document.createElement("link");v.rel="stylesheet",v.href=x,v.setAttribute("data-snapdom","injected-import"),v.onload=()=>$(v),v.onerror=()=>$(null),document.head.appendChild(v)})));let h="";const m=Array.from(document.querySelectorAll('link[rel="stylesheet"]')).filter(x=>!!x.href);for(const x of m)try{if(it(x.href))continue;let $="",v=!1;try{v=new URL(x.href,location.href).origin===location.origin}catch{}if(!v&&!ur(x.href,c))continue;if(v){const R=Array.from(document.styleSheets).find(L=>L.href===x.href);if(R)try{const L=R.cssRules||[];$=Array.from(L).map(N=>N.cssText).join("")}catch{}}if(!$&&($=(await tt(x.href,{as:"text",useProxy:s})).data,it(x.href)))continue;$=await hr($,x.href,s);let T="";for(const R of $.match(dr)||[]){const L=(((d=R.match(/font-family:\s*([^;]+);/i))==null?void 0:d[1])||"").trim(),N=Nt(L);if(!N||it(N))continue;const D=(((y=R.match(/font-weight:\s*([^;]+);/i))==null?void 0:y[1])||"400").trim(),j=(((b=R.match(/font-style:\s*([^;]+);/i))==null?void 0:b[1])||"normal").trim(),rt=(((S=R.match(/font-stretch:\s*([^;]+);/i))==null?void 0:S[1])||"100%").trim(),st=(((A=R.match(/unicode-range:\s*([^;]+);/i))==null?void 0:A[1])||"").trim(),Z=(((C=R.match(/src\s*:\s*([^;]+);/i))==null?void 0:C[1])||"").trim(),z=se(Z,x.href);if(!i(N,j,D,rt))continue;const K=ze(st);if(!Be(t,K))continue;const q={family:N,weightSpec:D,styleSpec:j,stretchSpec:rt,unicodeRange:st,srcRaw:Z,srcUrls:z,href:x.href};if(n&&l(q,K))continue;const V=/url\(/i.test(Z)?await Ue(R,x.href,s):R;T+=V}T.trim()&&(h+=T)}catch{}const g={requiredIndex:o,usedCodepoints:t,faceMatchesRequired:i,simpleExcluder:n?Se(n):null,useProxy:s,visitedSheets:new Set,depth:0};for(const x of document.styleSheets)if(!(x.href&&m.some($=>$.href===x.href)))try{const $=x.href||location.href;$&&g.visitedSheets.add($),await De(x,$,async v=>{h+=v},g)}catch{}try{for(const x of document.fonts||[]){if(!x||!x.family||x.status!=="loaded"||!x._snapdomSrc)continue;const $=String(x.family).replace(/^['"]+|['"]+$/g,"");if(it($)||!o.has($)||n!=null&&n.families&&n.families.some(T=>String(T).toLowerCase()===$.toLowerCase()))continue;let v=x._snapdomSrc;if(!String(v).startsWith("data:")){if((_=w.resource)!=null&&_.has(x._snapdomSrc))v=w.resource.get(x._snapdomSrc),(U=w.font)==null||U.add(x._snapdomSrc);else if(!((E=w.font)!=null&&E.has(x._snapdomSrc)))try{const T=await tt(x._snapdomSrc,{as:"dataURL",useProxy:s,silent:!0});if(T.ok&&typeof T.data=="string")v=T.data,(W=w.resource)==null||W.set(x._snapdomSrc,v),(B=w.font)==null||B.add(x._snapdomSrc);else continue}catch{continue}}h+=`@font-face{font-family:'${$}';src:url(${v});font-style:${x.style||"normal"};font-weight:${x.weight||"normal"};}`}}catch{}for(const x of r){if(!x||typeof x!="object")continue;const $=String(x.family||"").replace(/^['"]+|['"]+$/g,"");if(!$||it($)||!o.has($)||n!=null&&n.families&&n.families.some(D=>String(D).toLowerCase()===$.toLowerCase()))continue;const v=x.weight!=null?String(x.weight):"normal",T=x.style!=null?String(x.style):"normal",R=x.stretchPct!=null?`${x.stretchPct}%`:"100%",L=String(x.src||"");let N=L;if(!N.startsWith("data:")){if((H=w.resource)!=null&&H.has(L))N=w.resource.get(L),(et=w.font)==null||et.add(L);else if(!((P=w.font)!=null&&P.has(L)))try{const D=await tt(L,{as:"dataURL",useProxy:s,silent:!0});if(D.ok&&typeof D.data=="string")N=D.data,(lt=w.resource)==null||lt.set(L,N),(Q=w.font)==null||Q.add(L);else continue}catch{continue}}h+=`@font-face{font-family:'${$}';src:url(${N});font-style:${T};font-weight:${v};font-stretch:${R};}`}return h&&(h=mr(h),(nt=w.resource)==null||nt.set(a,h)),h}function br(e){const t=new Set;if(!e)return t;const n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null),r=i=>{const l=Nt(i.fontFamily);if(!l)return;const a=(c,u,f)=>`${l}__${Tt(c)}__${Zt(u)}__${ir(f)}`;t.add(a(i.fontWeight,i.fontStyle,i.fontStretch))};r(getComputedStyle(e));const s=getComputedStyle(e,"::before");s&&s.content&&s.content!=="none"&&r(s);const o=getComputedStyle(e,"::after");for(o&&o.content&&o.content!=="none"&&r(o);n.nextNode();){const i=n.currentNode,l=getComputedStyle(i);r(l);const a=getComputedStyle(i,"::before");a&&a.content&&a.content!=="none"&&r(a);const c=getComputedStyle(i,"::after");c&&c.content&&c.content!=="none"&&r(c)}return t}function wr(e){const t=new Set,n=s=>{if(s)for(const o of s)t.add(o.codePointAt(0))},r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,null);for(;r.nextNode();){const s=r.currentNode;if(s.nodeType===Node.TEXT_NODE)n(s.nodeValue||"");else if(s.nodeType===Node.ELEMENT_NODE){const o=s;for(const i of["::before","::after"]){const l=getComputedStyle(o,i),a=l==null?void 0:l.getPropertyValue("content");if(!(!a||a==="none"))if(/^"/.test(a)||/^'/.test(a))n(a.slice(1,-1));else{const c=a.match(/\\[0-9A-Fa-f]{1,6}/g);if(c)for(const u of c)try{t.add(parseInt(u.slice(1),16))}catch{}}}}}return t}async function kr(e,t=2){try{await document.fonts.ready}catch{}const n=Array.from(e||[]).filter(Boolean);if(n.length===0)return;const r=()=>{const s=document.createElement("div");s.style.cssText="position:absolute!important;left:-9999px!important;top:0!important;opacity:0!important;pointer-events:none!important;contain:layout size style;";for(const o of n){const i=document.createElement("span");i.textContent="AaBbGg1234ÁÉÍÓÚçñ—∞",i.style.fontFamily=`"${o}"`,i.style.fontWeight="700",i.style.fontStyle="italic",i.style.fontSize="32px",i.style.lineHeight="1",i.style.whiteSpace="nowrap",i.style.margin="0",i.style.padding="0",s.appendChild(i)}document.body.appendChild(s),s.offsetWidth,document.body.removeChild(s)};for(let s=0;s<Math.max(1,t);s++)r(),await new Promise(o=>requestAnimationFrame(()=>requestAnimationFrame(o)))}function xr(e){return/\bcounter\s*\(|\bcounters\s*\(/.test(e||"")}function Sr(e){return(e||"").replace(/"([^"]*)"/g,"$1")}function $e(e,t=!1){let n="",r=Math.max(1,e);for(;r>0;)r--,n=String.fromCharCode(97+r%26)+n,r=Math.floor(r/26);return t?n.toUpperCase():n}function Ce(e,t=!0){const n=[[1e3,"M"],[900,"CM"],[500,"D"],[400,"CD"],[100,"C"],[90,"XC"],[50,"L"],[40,"XL"],[10,"X"],[9,"IX"],[5,"V"],[4,"IV"],[1,"I"]];let r=Math.max(1,Math.min(3999,e)),s="";for(const[o,i]of n)for(;r>=o;)s+=i,r-=o;return t?s:s.toLowerCase()}function Me(e,t){switch((t||"decimal").toLowerCase()){case"decimal":return String(Math.max(0,e));case"decimal-leading-zero":return(e<10?"0":"")+String(Math.max(0,e));case"lower-alpha":return $e(e,!1);case"upper-alpha":return $e(e,!0);case"lower-roman":return Ce(e,!1);case"upper-roman":return Ce(e,!0);default:return String(Math.max(0,e))}}function $r(e){const t=new WeakMap,n=e instanceof Document?e.documentElement:e,r=c=>c&&c.tagName==="LI",s=c=>{let u=0,f=c==null?void 0:c.parentElement;if(!f)return 0;for(const h of f.children){if(h===c)break;h.tagName==="LI"&&u++}return u},o=c=>{const u=new Map;for(const[f,h]of c)u.set(f,h.slice());return u},i=(c,u,f)=>{var p,d;const h=o(c);let m;try{m=((p=f.style)==null?void 0:p.counterReset)||getComputedStyle(f).counterReset}catch{}if(m&&m!=="none")for(const y of m.split(",")){const b=y.trim().split(/\s+/),S=b[0],A=Number.isFinite(Number(b[1]))?Number(b[1]):0;if(!S)continue;const C=u.get(S);if(C&&C.length){const _=C.slice();_.push(A),h.set(S,_)}else h.set(S,[A])}let g;try{g=((d=f.style)==null?void 0:d.counterIncrement)||getComputedStyle(f).counterIncrement}catch{}if(g&&g!=="none")for(const y of g.split(",")){const b=y.trim().split(/\s+/),S=b[0],A=Number.isFinite(Number(b[1]))?Number(b[1]):1;if(!S)continue;const C=h.get(S)||[];C.length===0&&C.push(0),C[C.length-1]+=A,h.set(S,C)}try{if(getComputedStyle(f).display==="list-item"&&r(f)){const b=f.parentElement;let S=1;if(b&&b.tagName==="OL"){const C=b.getAttribute("start"),_=Number.isFinite(Number(C))?Number(C):1,U=s(f),E=f.getAttribute("value");S=Number.isFinite(Number(E))?Number(E):_+U}else S=1+s(f);const A=h.get("list-item")||[];A.length===0&&A.push(0),A[A.length-1]=S,h.set("list-item",A)}}catch{}return h},l=(c,u,f)=>{const h=i(f,u,c);t.set(c,h);let m=h;for(const g of c.children)m=l(g,h,m);return h},a=new Map;return l(n,a,a),{get(c,u){var h;const f=(h=t.get(c))==null?void 0:h.get(u);return f&&f.length?f[f.length-1]:0},getStack(c,u){var h;const f=(h=t.get(c))==null?void 0:h.get(u);return f?f.slice():[]}}}function Cr(e,t,n){if(!e||e==="none")return e;try{const r=/\b(counter|counters)\s*\(([^)]+)\)/g;let s=e.replace(r,(o,i,l)=>{var c,u,f;const a=String(l).split(",").map(h=>h.trim());if(i==="counter"){const h=(c=a[0])==null?void 0:c.replace(/^["']|["']$/g,""),m=(a[1]||"decimal").toLowerCase(),g=n.get(t,h);return Me(g,m)}else{const h=(u=a[0])==null?void 0:u.replace(/^["']|["']$/g,""),m=((f=a[1])==null?void 0:f.replace(/^["']|["']$/g,""))??"",g=(a[2]||"decimal").toLowerCase(),p=n.getStack(t,h);return p.length?p.map(y=>Me(y,g)).join(m):""}});return Sr(s)}catch{return"- "}}var kt=null,$t=new WeakMap;function Mr(e){return(e||"").replace(/"([^"]*)"/g,"$1")}function Ar(e){if(!e)return"";const t=[],n=/"([^"]*)"/g;let r;for(;r=n.exec(e);)t.push(r[1]);return t.length?t.join(""):Mr(e)}function Qt(e,t){const n=e.parentElement,r=n?$t.get(n):null;return r?{get(s,o){const i=t.get(s,o),l=r.get(o);return typeof l=="number"?Math.max(i,l):i},getStack(s,o){const i=t.getStack(s,o);if(!i.length)return i;const l=r.get(o);if(typeof l=="number"){const a=i.slice();return a[a.length-1]=Math.max(a[a.length-1],l),a}return i}}:t}function Kt(e,t,n){const r=new Map;function s(a){const c=[];if(!a||a==="none")return c;for(const u of String(a).split(",")){const f=u.trim().split(/\s+/),h=f[0],m=Number.isFinite(Number(f[1]))?Number(f[1]):void 0;h&&c.push({name:h,num:m})}return c}const o=s(t==null?void 0:t.counterReset),i=s(t==null?void 0:t.counterIncrement);function l(a){if(r.has(a))return r.get(a).slice();let c=n.getStack(e,a);c=c.length?c.slice():[];const u=o.find(h=>h.name===a);if(u){const h=Number.isFinite(u.num)?u.num:0;c=c.length?[...c,h]:[h]}const f=i.find(h=>h.name===a);if(f){const h=Number.isFinite(f.num)?f.num:1;c.length===0&&(c=[0]),c[c.length-1]+=h}return r.set(a,c.slice()),c}return{get(a,c){const u=l(c);return u.length?u[u.length-1]:0},getStack(a,c){return l(c)},__incs:i}}function vr(e,t,n){let r;try{r=getComputedStyle(e,t)}catch{}const s=r==null?void 0:r.content;if(!s||s==="none"||s==="normal")return{text:"",incs:[]};const o=Qt(e,n),i=Kt(e,r,o);let l=xr(s)?Cr(s,e,i):s;return{text:Ar(l),incs:i.__incs||[]}}async function He(e,t,n,r){var i;if(!(e instanceof Element)||!(t instanceof Element))return;if(!kt)try{kt=$r(e.ownerDocument||document)}catch{}for(const l of["::before","::after","::first-letter"])try{const a=Ne(e,l);if(!a||typeof a[Symbol.iterator]!="function"||a.content==="none"&&a.backgroundImage==="none"&&a.backgroundColor==="transparent"&&(a.borderStyle==="none"||parseFloat(a.borderWidth)===0)&&(!a.transform||a.transform==="none")&&a.display==="inline")continue;if(l==="::first-letter"){const $=getComputedStyle(e);if(!(a.color!==$.color||a.fontSize!==$.fontSize||a.fontWeight!==$.fontWeight))continue;const T=Array.from(t.childNodes).find(z=>{var K;return z.nodeType===Node.TEXT_NODE&&((K=z.textContent)==null?void 0:K.trim().length)>0});if(!T)continue;const R=T.textContent,L=R.match(/^([^\p{L}\p{N}\s]*[\p{L}\p{N}](?:['’])?)/u),N=L==null?void 0:L[0],D=R.slice((N==null?void 0:N.length)||0);if(!N||/[\uD800-\uDFFF]/.test(N))continue;const j=document.createElement("span");j.textContent=N,j.dataset.snapdomPseudo="::first-letter";const rt=ye(a),st=qt(rt,"span");n.styleMap.set(j,st);const Z=document.createTextNode(D);t.replaceChild(Z,T),t.insertBefore(j,Z);continue}const u=a.content,{text:f,incs:h}=vr(e,l,kt),m=a.backgroundImage,g=a.backgroundColor,p=a.fontFamily,d=parseInt(a.fontSize)||32,y=parseInt(a.fontWeight)||!1,b=a.color||"#000",S=a.borderStyle,A=parseFloat(a.borderWidth),C=a.transform,_=it(p),U=u!=="none"&&f!=="",E=m&&m!=="none",W=g&&g!=="transparent"&&g!=="rgba(0, 0, 0, 0)",B=S&&S!=="none"&&A>0,H=C&&C!=="none";if(!(U||E||W||B||H)){if(h&&h.length&&e.parentElement){const $=$t.get(e.parentElement)||new Map;for(const{name:v}of h){if(!v)continue;const T=Qt(e,kt),L=Kt(e,getComputedStyle(e,l),T).get(e,v);$.set(v,L)}$t.set(e.parentElement,$)}continue}const P=document.createElement("span");P.dataset.snapdomPseudo=l,P.style.verticalAlign="middle",P.style.pointerEvents="none";const lt=ye(a),Q=qt(lt,"span");if(n.styleMap.set(P,Q),_&&f&&f.length===1){const{dataUrl:$,width:v,height:T}=await sr(f,p,y,d,b),R=document.createElement("img");R.src=$,R.style=`height:${d}px;width:${v/T*d}px;object-fit:contain;`,P.appendChild(R),t.dataset.snapdomHasIcon="true"}else if(f&&f.startsWith("url(")){const $=ee(f);if($!=null&&$.trim())try{const v=document.createElement("img"),T=await tt(Ft($),{as:"dataURL",useProxy:r.useProxy});v.src=T.data,v.style=`width:${d}px;height:auto;object-fit:contain;`,P.appendChild(v)}catch{}}else!_&&U&&(P.textContent=f);if(P.style.background="none","mask"in P.style&&(P.style.mask="none"),E)try{const $=Pe(m),v=await Promise.all($.map(Ie));P.style.backgroundImage=v.join(", ")}catch{}W&&(P.style.backgroundColor=g);const x=P.childNodes.length>0||((i=P.textContent)==null?void 0:i.trim())!==""||E||W||B||H;if(h&&h.length&&e.parentElement){const $=$t.get(e.parentElement)||new Map,v=Qt(e,kt),T=Kt(e,getComputedStyle(e,l),v);for(const{name:R}of h){if(!R)continue;const L=T.get(e,R);$.set(R,L)}$t.set(e.parentElement,$)}if(!x)continue;l==="::before"?t.insertBefore(P,t.firstChild):t.appendChild(P)}catch{}const s=Array.from(e.children),o=Array.from(t.children).filter(l=>!l.dataset.snapdomPseudo);for(let l=0;l<Math.min(s.length,o.length);l++)await He(s[l],o[l],n,r)}function _r(e){if(!e)return;const t=new Set;if(e.querySelectorAll("use").forEach(l=>{const a=l.getAttribute("xlink:href")||l.getAttribute("href");a&&a.startsWith("#")&&t.add(a.slice(1))}),!t.size)return;const n=Array.from(document.querySelectorAll("svg > symbol, svg > defs")),r=n.filter(l=>l.tagName.toLowerCase()==="symbol"),s=n.filter(l=>l.tagName.toLowerCase()==="defs");let o=e.querySelector("svg.inline-defs-container");o||(o=document.createElementNS("http://www.w3.org/2000/svg","svg"),o.setAttribute("aria-hidden","true"),o.setAttribute("style","position: absolute; width: 0; height: 0; overflow: hidden;"),o.classList.add("inline-defs-container"),e.insertBefore(o,e.firstChild));const i=new Set;e.querySelectorAll("symbol[id], defs > *[id]").forEach(l=>{i.add(l.id)}),t.forEach(l=>{if(i.has(l))return;const a=r.find(c=>c.id===l);if(a){o.appendChild(a.cloneNode(!0)),i.add(l);return}for(const c of s){const u=c.querySelector(`#${CSS.escape(l)}`);if(u){let f=o.querySelector("defs");f||(f=document.createElementNS("http://www.w3.org/2000/svg","defs"),o.appendChild(f)),f.appendChild(u.cloneNode(!0)),i.add(l);break}}})}function Er(e,t){var l;if(!e||!t)return;const n=e.scrollTop||0;if(!n)return;getComputedStyle(t).position==="static"&&(t.style.position="relative");const r=e.getBoundingClientRect(),s=e.clientHeight,o="data-snap-ph",i=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT);for(;i.nextNode();){const a=i.currentNode,c=getComputedStyle(a),u=c.position;if(u!=="sticky"&&u!=="-webkit-sticky")continue;const f=Ae(c.top),h=Ae(c.bottom);if(f==null&&h==null)continue;const m=Tr(a,e),g=Rr(t,m,o);if(!g)continue;const p=a.getBoundingClientRect(),d=p.width,y=p.height,b=p.left-r.left;if(!(d>0&&y>0)||!Number.isFinite(b))continue;const S=f!=null?f+n:n+(s-y-h);if(!Number.isFinite(S))continue;const A=Number.parseInt(c.zIndex,10),C=Number.isFinite(A),_=C?Math.max(A,1)+1:2,U=C?A-1:0,E=g.cloneNode(!1);E.setAttribute(o,"1"),E.style.position="sticky",E.style.left=`${b}px`,E.style.top=`${S}px`,E.style.width=`${d}px`,E.style.height=`${y}px`,E.style.visibility="hidden",E.style.zIndex=String(U),E.style.overflow="hidden",E.style.background="transparent",E.style.boxShadow="none",E.style.filter="none",(l=g.parentElement)==null||l.insertBefore(E,g),g.style.position="absolute",g.style.left=`${b}px`,g.style.top=`${S}px`,g.style.bottom="auto",g.style.zIndex=String(_),g.style.pointerEvents="none"}}function Ae(e){if(!e||e==="auto")return null;const t=Number.parseFloat(e);return Number.isFinite(t)?t:null}function Tr(e,t){const n=[];for(let r=e;r&&r!==t;){const s=r.parentElement;if(!s)break;n.push(Array.prototype.indexOf.call(s.children,r)),r=s}return n.reverse()}function Rr(e,t,n){let r=e;for(let s=0;s<t.length;s++)if(r=Lr(r,n)[t[s]],!r)return null;return r instanceof HTMLElement?r:null}function Lr(e,t){const n=[],r=e.children;for(let s=0;s<r.length;s++){const o=r[s];o.hasAttribute(t)||n.push(o)}return n}async function Ir(e,t={}){var a,c;const n={styleMap:w.session.styleMap,styleCache:w.session.styleCache,nodeMap:w.session.nodeMap};let r,s="",o="";Fr(e);try{_r(e)}catch{}try{r=await Et(e,n,t,e)}catch(u){throw u}try{await He(e,r,n,t)}catch{}await Or(r);try{const u=r.querySelectorAll("style[data-sd]");for(const f of u)o+=f.textContent||"",f.remove()}catch{}const i=En(n.styleMap);s=Array.from(i.entries()).map(([u,f])=>`.${f}{${u}}`).join(""),s=o+s;for(const[u,f]of n.styleMap.entries()){if(u.tagName==="STYLE")continue;if(u.getRootNode&&u.getRootNode()instanceof ShadowRoot){u.setAttribute("style",f.replace(/;/g,"; "));continue}const h=i.get(f);h&&u.classList.add(h);const m=(a=u.style)==null?void 0:a.backgroundImage,g=(c=u.dataset)==null?void 0:c.snapdomHasIcon;m&&m!=="none"&&(u.style.backgroundImage=m),g&&(u.style.verticalAlign="middle",u.style.display="inline")}for(const[u,f]of n.nodeMap.entries()){const h=f.scrollLeft,m=f.scrollTop;if((h||m)&&u instanceof HTMLElement){u.style.overflow="hidden",u.style.scrollbarWidth="none",u.style.msOverflowStyle="none";const p=document.createElement("div");for(p.style.transform=`translate(${-h}px, ${-m}px)`,p.style.willChange="transform",p.style.display="inline-block",p.style.width="100%";u.firstChild;)p.appendChild(u.firstChild);u.appendChild(p)}}const l=r instanceof HTMLElement&&r.firstElementChild instanceof HTMLElement?r.firstElementChild:r;if(Er(e,l),e===n.nodeMap.get(r)){const u=n.styleCache.get(e)||window.getComputedStyle(e);n.styleCache.set(e,u);const f=mn(u.transform);r.style.margin="0",r.style.top="auto",r.style.left="auto",r.style.right="auto",r.style.bottom="auto",r.style.animation="none",r.style.transition="none",r.style.willChange="auto",r.style.float="none",r.style.clear="none",r.style.transform=f||""}for(const[u,f]of n.nodeMap.entries())f.tagName==="PRE"&&(u.style.marginTop="0",u.style.marginBlockStart="0");return{clone:r,classCSS:s,styleCache:n.styleCache}}function Fr(e){const t=getComputedStyle(e),n=t.outlineStyle,r=t.outlineWidth,s=t.borderStyle,o=t.borderWidth,i=n!=="none"&&parseFloat(r)>0,l=s==="none"||parseFloat(o)===0;i&&l&&(e.style.border=`${r} solid transparent`)}var xt=new Map;async function Ct(e){var n;if((n=w.resource)!=null&&n.has(e))return w.resource.get(e);if(xt.has(e))return xt.get(e);const t=(async()=>{var s;const r=await tt(e,{as:"dataURL",silent:!0});if(!r.ok||typeof r.data!="string")throw new Error(`[snapDOM] Failed to read blob URL: ${e}`);return(s=w.resource)==null||s.set(e,r.data),r.data})();xt.set(e,t);try{const r=await t;return xt.set(e,r),r}catch(r){throw xt.delete(e),r}}var Nr=/\bblob:[^)"'\s]+/g;async function ve(e){if(!e||e.indexOf("blob:")===-1)return e;const t=Array.from(new Set(e.match(Nr)||[]));if(t.length===0)return e;let n=e;for(const r of t)try{const s=await Ct(r);n=n.split(r).join(s)}catch{}return n}function vt(e){return typeof e=="string"&&e.startsWith("blob:")}function Pr(e){return(e||"").split(",").map(t=>t.trim()).filter(Boolean).map(t=>{const n=t.match(/^(\S+)(\s+.+)?$/);return n?{url:n[1],desc:n[2]||""}:null}).filter(Boolean)}function Wr(e){return e.map(t=>t.desc?`${t.url} ${t.desc.trim()}`:t.url).join(", ")}async function Or(e){var i,l;if(!e)return;const t=e.querySelectorAll?e.querySelectorAll("img"):[];for(const a of t)try{const u=a.getAttribute("src")||a.currentSrc||"";if(vt(u)){const h=await Ct(u);a.setAttribute("src",h)}const f=a.getAttribute("srcset");if(f&&f.includes("blob:")){const h=Pr(f);let m=!1;for(const g of h)if(vt(g.url))try{g.url=await Ct(g.url),m=!0}catch{}m&&a.setAttribute("srcset",Wr(h))}}catch{}const n=e.querySelectorAll?e.querySelectorAll("image"):[];for(const a of n)try{const c="http://www.w3.org/1999/xlink",u=a.getAttribute("href")||((i=a.getAttributeNS)==null?void 0:i.call(a,c,"href"));if(vt(u)){const f=await Ct(u);a.setAttribute("href",f),(l=a.removeAttributeNS)==null||l.call(a,c,"href")}}catch{}const r=e.querySelectorAll?e.querySelectorAll("[style*='blob:']"):[];for(const a of r)try{const c=a.getAttribute("style");if(c&&c.includes("blob:")){const u=await ve(c);a.setAttribute("style",u)}}catch{}const s=e.querySelectorAll?e.querySelectorAll("style"):[];for(const a of s)try{const c=a.textContent||"";c.includes("blob:")&&(a.textContent=await ve(c))}catch{}const o=["poster"];for(const a of o){const c=e.querySelectorAll?e.querySelectorAll(`[${a}^='blob:']`):[];for(const u of c)try{const f=u.getAttribute(a);vt(f)&&u.setAttribute(a,await Ct(f))}catch{}}}async function zr(e,t={}){const n=Array.from(e.querySelectorAll("img")),r=async s=>{var u,f,h,m;if(!s.getAttribute("src")){const g=s.currentSrc||s.src||"";g&&s.setAttribute("src",g)}s.removeAttribute("srcset"),s.removeAttribute("sizes");const o=s.src||"";if(!o)return;const i=await tt(o,{as:"dataURL",useProxy:t.useProxy});if(i.ok&&typeof i.data=="string"&&i.data.startsWith("data:")){s.src=i.data,s.width||(s.width=s.naturalWidth||100),s.height||(s.height=s.naturalHeight||100);return}const{fallbackURL:l}=t||{};if(l)try{const g=parseInt(((u=s.dataset)==null?void 0:u.snapdomWidth)||"",10)||0,p=parseInt(((f=s.dataset)==null?void 0:f.snapdomHeight)||"",10)||0,d=parseInt(s.getAttribute("width")||"",10)||0,y=parseInt(s.getAttribute("height")||"",10)||0,b=parseFloat(((h=s.style)==null?void 0:h.width)||"")||0,S=parseFloat(((m=s.style)==null?void 0:m.height)||"")||0,A=g||b||d||s.width||void 0,C=p||S||y||s.height||void 0,_=typeof l=="function"?await l({width:A,height:C,src:o,element:s}):l;if(_){const U=await tt(_,{as:"dataURL",useProxy:t.useProxy});s.src=U.data,!s.width&&A&&(s.width=A),!s.height&&C&&(s.height=C),s.width||(s.width=s.naturalWidth||100),s.height||(s.height=s.naturalHeight||100);return}}catch{}const a=s.width||s.naturalWidth||100,c=s.height||s.naturalHeight||100;if(t.placeholders!==!1){const g=document.createElement("div");g.style.cssText=[`width:${a}px`,`height:${c}px`,"background:#ccc","display:inline-block","text-align:center",`line-height:${c}px`,"color:#666","font-size:12px","overflow:hidden"].join(";"),g.textContent="img",s.replaceWith(g)}else{const g=document.createElement("div");g.style.cssText=`display:inline-block;width:${a}px;height:${c}px;visibility:hidden;`,s.replaceWith(g)}};for(let s=0;s<n.length;s+=4){const o=n.slice(s,s+4).map(r);await Promise.allSettled(o)}}async function Br(e,t,n,r={}){const s=[[e,t]],o=["background-image","mask","mask-image","-webkit-mask","-webkit-mask-image","mask-source","mask-box-image-source","mask-border-source","-webkit-mask-box-image-source","border-image","border-image-source"],i=["mask-position","mask-size","mask-repeat","-webkit-mask-position","-webkit-mask-size","-webkit-mask-repeat","mask-origin","mask-clip","-webkit-mask-origin","-webkit-mask-clip","-webkit-mask-position-x","-webkit-mask-position-y"],l=["border-image-slice","border-image-width","border-image-outset","border-image-repeat"];for(;s.length;){const[a,c]=s.shift(),u=n.get(a)||Ne(a);n.has(a)||n.set(a,u);const f=(()=>{const g=u.getPropertyValue("border-image"),p=u.getPropertyValue("border-image-source");return g&&g!=="none"||p&&p!=="none"})();for(const g of o){const p=u.getPropertyValue(g);if(!p||p==="none")continue;const d=Pe(p),y=await Promise.all(d.map(b=>Ie(b,r)));y.some(b=>b&&b!=="none"&&!/^url\(undefined/.test(b))&&c.style.setProperty(g,y.join(", "))}for(const g of i){const p=u.getPropertyValue(g);!p||p==="initial"||c.style.setProperty(g,p)}if(f)for(const g of l){const p=u.getPropertyValue(g);!p||p==="initial"||c.style.setProperty(g,p)}const h=Array.from(a.children),m=Array.from(c.children);for(let g=0;g<Math.min(h.length,m.length);g++)s.push([h[g],m[g]])}}function Ur(e){if(!e)return()=>{};const t=Dr(e);if(t<=0)return()=>{};if(!jr(e))return()=>{};const n=getComputedStyle(e),r=Math.round(Hr(n)*t+qr(n)),s=e.textContent??"",o=s;if(e.scrollHeight<=r+.5)return()=>{};let i=0,l=s.length,a=-1;for(;i<=l;){const c=i+l>>1;e.textContent=s.slice(0,c)+"…",e.scrollHeight<=r+.5?(a=c,i=c+1):l=c-1}return e.textContent=(a>=0?s.slice(0,a):"")+"…",()=>{e.textContent=o}}function Dr(e){const t=getComputedStyle(e);let n=t.getPropertyValue("-webkit-line-clamp")||t.getPropertyValue("line-clamp");n=(n||"").trim();const r=parseInt(n,10);return Number.isFinite(r)&&r>0?r:0}function Hr(e){const t=(e.lineHeight||"").trim(),n=parseFloat(e.fontSize)||16;return!t||t==="normal"?Math.round(n*1.2):t.endsWith("px")?parseFloat(t):/^\d+(\.\d+)?$/.test(t)?Math.round(parseFloat(t)*n):t.endsWith("%")?Math.round(parseFloat(t)/100*n):Math.round(n*1.2)}function qr(e){return(parseFloat(e.paddingTop)||0)+(parseFloat(e.paddingBottom)||0)}function jr(e){return e.childElementCount>0?!1:Array.from(e.childNodes).some(t=>t.nodeType===Node.TEXT_NODE)}function Vr(e,t){if(!e||!t||!t.style)return;const n=getComputedStyle(e);try{t.style.boxShadow="none"}catch{}try{t.style.textShadow="none"}catch{}try{t.style.outline="none"}catch{}const s=(n.filter||"").replace(/\bblur\([^()]*\)\s*/gi,"").replace(/\bdrop-shadow\([^()]*\)\s*/gi,"").trim().replace(/\s+/g," ");try{t.style.filter=s.length?s:"none"}catch{}}async function qe(e,t){if(!e)throw new Error("Element cannot be null or undefined");pn(t.cache);const n=t.fast,r=!!t.straighten,s=!!t.noShadows;let o,i,l,a="",c="",u,f,h=null;const m=Ur(e);try{({clone:o,classCSS:i,styleCache:l}=await Ir(e,t)),r&&o&&(h=Xr(e,o)),s&&o&&Vr(e,o)}finally{m()}await new Promise(y=>{mt(async()=>{await zr(o,t),y()},{fast:n})}),await new Promise(y=>{mt(async()=>{await Br(e,o,l,t),y()},{fast:n})}),t.embedFonts&&await new Promise(y=>{mt(async()=>{const b=br(e),S=wr(e);if(ft()){const A=new Set(Array.from(b).map(C=>String(C).split("__")[0]).filter(Boolean));await kr(A,1)}a=await yr({required:b,usedCodepoints:S,exclude:t.excludeFonts,useProxy:t.useProxy}),y()},{fast:n})});const g=vn(o).sort(),p=g.join(",");w.baseStyle.has(p)?c=w.baseStyle.get(p):await new Promise(y=>{mt(()=>{c=_n(g),w.baseStyle.set(p,c),y()},{fast:n})}),await new Promise(y=>{mt(()=>{const b=getComputedStyle(e);function S(ot){var ae;const Y=`${ot.filter||""} ${ot.webkitFilter||""}`.trim();if(!Y||Y==="none")return{bleed:{top:0,right:0,bottom:0,left:0},has:!1};const at=Y.match(/drop-shadow\((?:[^()]|\([^()]*\))*\)/gi)||[];let ct=0,yt=0,bt=0,wt=0,ut=!1;for(const en of at){ut=!0;const nn=((ae=en.match(/-?\d+(?:\.\d+)?px/gi))==null?void 0:ae.map(rn=>parseFloat(rn)))||[],[zt=0,Bt=0,le=0]=nn,ce=Math.abs(zt)+le,ue=Math.abs(Bt)+le;yt=Math.max(yt,ce+Math.max(zt,0)),wt=Math.max(wt,ce+Math.max(-zt,0)),bt=Math.max(bt,ue+Math.max(Bt,0)),ct=Math.max(ct,ue+Math.max(-Bt,0))}return{bleed:{top:Math.ceil(ct),right:Math.ceil(yt),bottom:Math.ceil(bt),left:Math.ceil(wt)},has:ut}}const A=e.getBoundingClientRect(),C=Math.max(1,Math.ceil(e.offsetWidth||parseFloat(b.width)||A.width||1)),_=Math.max(1,Math.ceil(e.offsetHeight||parseFloat(b.height)||A.height||1)),U=(ot,Y=NaN)=>{const at=typeof ot=="string"?parseFloat(ot):ot;return Number.isFinite(at)?at:Y},E=U(t.width),W=U(t.height);let B=C,H=_;const et=Number.isFinite(E),P=Number.isFinite(W),lt=_>0?C/_:1;et&&P?(B=Math.max(1,Math.ceil(E)),H=Math.max(1,Math.ceil(W))):et?(B=Math.max(1,Math.ceil(E)),H=Math.max(1,Math.ceil(B/(lt||1)))):P?(H=Math.max(1,Math.ceil(W)),B=Math.max(1,Math.ceil(H*(lt||1)))):(B=C,H=_);let Q=0,nt=0,x=C,$=_;if(r&&h&&Number.isFinite(h.a)){const ot={a:h.a,b:h.b||0,c:h.c||0,d:h.d||1,e:0,f:0},Y=_e(C,_,ot,0,0);Q=Y.minX,nt=Y.minY,x=Y.maxX,$=Y.maxY}else if(!r&&Kr(e)){const Y=b.transform&&b.transform!=="none"?b.transform:"",at=Gr(e),ct=ns({baseTransform:Y,rotate:at.rotate||"0deg",scale:at.scale,translate:at.translate}),{ox:yt,oy:bt}=ts(b,C,_),wt=ct.is2D?ct:new DOMMatrix(ct.toString()),ut=_e(C,_,wt,yt,bt);Q=ut.minX,nt=ut.minY,x=ut.maxX,$=ut.maxY}const v=Zr(b),T=Yr(b),R=Qr(b),L=S(b),N=s?{top:0,right:0,bottom:0,left:0}:{top:v.top+T.top+R.top+L.bleed.top,right:v.right+T.right+R.right+L.bleed.right,bottom:v.bottom+T.bottom+R.bottom+L.bleed.bottom,left:v.left+T.left+R.left+L.bleed.left};Q-=N.left,nt-=N.top,x+=N.right,$+=N.bottom;const D=Math.max(1,Math.ceil(x-Q)),j=Math.max(1,Math.ceil($-nt)),rt=Math.max(1,Math.round(D*(et||P?B/C:1))),st=Math.max(1,Math.round(j*(P||et?H/_:1))),Z="http://www.w3.org/2000/svg",q=(ft()?1:0)+(r?1:0),V=document.createElementNS(Z,"foreignObject"),Qe=Math.floor(Q),Ke=Math.floor(nt);V.setAttribute("x",String(-(Qe-q))),V.setAttribute("y",String(-(Ke-q))),V.setAttribute("width",String(Math.ceil(C+q*2))),V.setAttribute("height",String(Math.ceil(_+q*2))),V.style.overflow="visible";const oe=document.createElement("style");oe.textContent=c+a+"svg{overflow:visible;} foreignObject{overflow:visible;}"+i,V.appendChild(oe);const pt=document.createElement("div");pt.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),pt.style.width=`${C}px`,pt.style.height=`${_}px`,pt.style.overflow="visible",o.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),pt.appendChild(o),V.appendChild(pt);const Ge=new XMLSerializer().serializeToString(V),Wt=D+q*2,Ot=j+q*2,ie=et||P;t.meta={w0:C,h0:_,vbW:Wt,vbH:Ot,targetW:B,targetH:H};const Je=ft()&&ie?Wt:rt+q*2,tn=ft()&&ie?Ot:st+q*2;f=`<svg xmlns="${Z}" width="${Je}" height="${tn}" viewBox="0 0 ${Wt} ${Ot}">`+Ge+"</svg>",u=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(f)}`,y()},{fast:n})});const d=document.getElementById("snapdom-sandbox");return d&&d.style.position==="absolute"&&d.remove(),u}function Xr(e,t){if(!e||!t||!t.style)return null;const n=getComputedStyle(e);try{t.style.transformOrigin="0 0"}catch{}try{"translate"in t.style&&(t.style.translate="none"),"rotate"in t.style&&(t.style.rotate="none")}catch{}const r=n.transform||"none";if(r==="none")try{const o=je(e);if(o.a===1&&o.b===0&&o.c===0&&o.d===1)return t.style.transform="none",{a:1,b:0,c:0,d:1}}catch{}const s=r.match(/^matrix\(\s*([^)]+)\)$/i);if(s){const o=s[1].split(",").map(i=>parseFloat(i.trim()));if(o.length===6&&o.every(Number.isFinite)){const[i,l,a,c]=o,u=Math.sqrt(i*i+l*l)||0;let f=0,h=0,m=0,g=0,p=0,d=0;u>0&&(f=i/u,h=l/u,m=f*a+h*c,g=a-f*m,p=c-h*m,d=Math.sqrt(g*g+p*p)||0,d>0?m=m/d:m=0);const y=u,b=0,S=m*d,A=d;try{t.style.transform=`matrix(${y}, ${b}, ${S}, ${A}, 0, 0)`}catch{}return{a:y,b,c:S,d:A}}}try{const o=String(r).trim();return t.style.transform=o+" translate(0px, 0px) rotate(0deg)",null}catch{return null}}function Zr(e){var l;const t=e.boxShadow||"";if(!t||t==="none")return{top:0,right:0,bottom:0,left:0};const n=t.split(/\),(?=(?:[^()]*\([^()]*\))*[^()]*$)/).map(a=>a.trim());let r=0,s=0,o=0,i=0;for(const a of n){const c=((l=a.match(/-?\d+(\.\d+)?px/g))==null?void 0:l.map(d=>parseFloat(d)))||[];if(c.length<2)continue;const[u,f,h=0,m=0]=c,g=Math.abs(u)+h+m,p=Math.abs(f)+h+m;s=Math.max(s,g+Math.max(u,0)),i=Math.max(i,g+Math.max(-u,0)),o=Math.max(o,p+Math.max(f,0)),r=Math.max(r,p+Math.max(-f,0))}return{top:Math.ceil(r),right:Math.ceil(s),bottom:Math.ceil(o),left:Math.ceil(i)}}function Yr(e){const t=(e.filter||"").match(/blur\(\s*([0-9.]+)px\s*\)/),n=t?Math.ceil(parseFloat(t[1])||0):0;return{top:n,right:n,bottom:n,left:n}}function Qr(e){if((e.outlineStyle||"none")==="none")return{top:0,right:0,bottom:0,left:0};const t=Math.ceil(parseFloat(e.outlineWidth||"0")||0);return{top:t,right:t,bottom:t,left:t}}function _e(e,t,n,r,s){const o=n.a,i=n.b,l=n.c,a=n.d,c=n.e||0,u=n.f||0;function f(y,b){let S=y-r,A=b-s,C=o*S+l*A,_=i*S+a*A;return C+=r+c,_+=s+u,[C,_]}const h=[f(0,0),f(e,0),f(0,t),f(e,t)];let m=1/0,g=1/0,p=-1/0,d=-1/0;for(const[y,b]of h)y<m&&(m=y),b<g&&(g=b),y>p&&(p=y),b>d&&(d=b);return{minX:m,minY:g,maxX:p,maxY:d,width:p-m,height:d-g}}function Kr(e){return Jr(e)}function je(e){const t=getComputedStyle(e).transform;if(!t||t==="none")return new DOMMatrix;try{return new DOMMatrix(t)}catch{return new WebKitCSSMatrix(t)}}function Gr(e){var s,o,i,l,a,c,u,f;const t={rotate:"0deg",scale:null,translate:null},n=typeof e.computedStyleMap=="function"?e.computedStyleMap():null;if(n){const h=d=>{try{return typeof n.has=="function"&&!n.has(d)||typeof n.get!="function"?null:n.get(d)}catch{return null}},m=h("rotate");if(m)if(m.angle){const d=m.angle;t.rotate=d.unit==="rad"?d.value*180/Math.PI+"deg":d.value+d.unit}else m.unit?t.rotate=m.unit==="rad"?m.value*180/Math.PI+"deg":m.value+m.unit:t.rotate=String(m);else{const d=getComputedStyle(e);t.rotate=d.rotate&&d.rotate!=="none"?d.rotate:"0deg"}const g=h("scale");if(g){const d="x"in g&&((s=g.x)==null?void 0:s.value)!=null?g.x.value:Array.isArray(g)?(o=g[0])==null?void 0:o.value:Number(g)||1,y="y"in g&&((i=g.y)==null?void 0:i.value)!=null?g.y.value:Array.isArray(g)?(l=g[1])==null?void 0:l.value:d;t.scale=`${d} ${y}`}else{const d=getComputedStyle(e);t.scale=d.scale&&d.scale!=="none"?d.scale:null}const p=h("translate");if(p){const d="x"in p&&"value"in p.x?p.x.value:Array.isArray(p)?(a=p[0])==null?void 0:a.value:0,y="y"in p&&"value"in p.y?p.y.value:Array.isArray(p)?(c=p[1])==null?void 0:c.value:0,b="x"in p&&((u=p.x)!=null&&u.unit)?p.x.unit:"px",S="y"in p&&((f=p.y)!=null&&f.unit)?p.y.unit:"px";t.translate=`${d}${b} ${y}${S}`}else{const d=getComputedStyle(e);t.translate=d.translate&&d.translate!=="none"?d.translate:null}return t}const r=getComputedStyle(e);return t.rotate=r.rotate&&r.rotate!=="none"?r.rotate:"0deg",t.scale=r.scale&&r.scale!=="none"?r.scale:null,t.translate=r.translate&&r.translate!=="none"?r.translate:null,t}function Jr(e){const t=getComputedStyle(e),n=t.transform||"none";if(n!=="none"&&!/^matrix\(\s*1\s*,\s*0\s*,\s*0\s*,\s*1\s*,\s*0\s*,\s*0\s*\)$/i.test(n))return!0;const s=t.rotate&&t.rotate!=="none"&&t.rotate!=="0deg",o=t.scale&&t.scale!=="none"&&t.scale!=="1",i=t.translate&&t.translate!=="none"&&t.translate!=="0px 0px";return!!(s||o||i)}function ts(e,t,n){const r=(e.transformOrigin||"0 0").trim().split(/\s+/),[s,o]=[r[0]||"0",r[1]||"0"],i=(l,a)=>{const c=l.toLowerCase();return c==="left"||c==="top"?0:c==="center"?a/2:c==="right"||c==="bottom"?a:c.endsWith("px")?parseFloat(c)||0:c.endsWith("%")?(parseFloat(c)||0)*a/100:/^-?\d+(\.\d+)?$/.test(c)&&parseFloat(c)||0};return{ox:i(s,t),oy:i(o,n)}}var Ht=null;function es(){if(Ht)return Ht;const e=document.createElement("div");return e.id="snapdom-measure-slot",e.setAttribute("aria-hidden","true"),Object.assign(e.style,{position:"absolute",left:"-99999px",top:"0px",width:"0px",height:"0px",overflow:"hidden",opacity:"0",pointerEvents:"none",contain:"size layout style"}),document.documentElement.appendChild(e),Ht=e,e}function ns(e){const t=es(),n=document.createElement("div");n.style.transformOrigin="0 0",e.baseTransform&&(n.style.transform=e.baseTransform),e.rotate&&(n.style.rotate=e.rotate),e.scale&&(n.style.scale=e.scale),e.translate&&(n.style.translate=e.translate),t.appendChild(n);const r=je(n);return t.removeChild(n),r}function rs(e){if(typeof e=="string"){const t=e.toLowerCase().trim();if(t==="disabled"||t==="full"||t==="auto"||t==="soft")return t}return"soft"}function ss(e={}){const t=e.format??"png",n=rs(e.cache);return{debug:e.debug??!1,fast:e.fast??!0,scale:e.scale??1,exclude:e.exclude??[],excludeMode:e.excludeMode??"hide",filter:e.filter??null,filterMode:e.filterMode??"hide",placeholders:e.placeholders!==!1,embedFonts:e.embedFonts??!1,iconFonts:Array.isArray(e.iconFonts)?e.iconFonts:e.iconFonts?[e.iconFonts]:[],localFonts:Array.isArray(e.localFonts)?e.localFonts:[],excludeFonts:e.excludeFonts??void 0,fallbackURL:e.fallbackURL??void 0,cache:n,useProxy:typeof e.useProxy=="string"?e.useProxy:"",width:e.width??null,height:e.height??null,format:t,type:e.type??"svg",quality:e.quality??.92,dpr:e.dpr??(window.devicePixelRatio||1),backgroundColor:e.backgroundColor??(["jpg","jpeg","webp"].includes(t)?"#ffffff":null),filename:e.filename??"snapDOM",straighten:e.straighten??!1,noShadows:e.noShadows??!1}}function os(e){return typeof e=="string"&&/^data:image\/svg\+xml/i.test(e)}function is(e){const t=e.indexOf(",");return t>=0?decodeURIComponent(e.slice(t+1)):""}function as(e){return`data:image/svg+xml;charset=utf-8,${encodeURIComponent(e)}`}function ls(e){let t=[],n="",r=0;for(let s=0;s<e.length;s++){const o=e[s];o==="("&&r++,o===")"&&(r=Math.max(0,r-1)),o===";"&&r===0?(t.push(n),n=""):n+=o}return n.trim()&&t.push(n),t.map(s=>s.trim()).filter(Boolean)}function cs(e){const t=[];let n="",r=0;for(let o=0;o<e.length;o++){const i=e[o];i==="("&&r++,i===")"&&(r=Math.max(0,r-1)),i===","&&r===0?(t.push(n.trim()),n=""):n+=i}n.trim()&&t.push(n.trim());const s=[];for(const o of t){if(/\binset\b/i.test(o))continue;const i=o.match(/-?\d+(?:\.\d+)?px/gi)||[],[l="0px",a="0px",c="0px"]=i;let u=o.replace(/-?\d+(?:\.\d+)?px/gi,"").replace(/\binset\b/ig,"").trim().replace(/\s{2,}/g," ");const f=!!u&&u!==",";s.push(`drop-shadow(${l} ${a} ${c}${f?` ${u}`:""})`)}return s.join(" ")}function Ve(e){const t=ls(e);let n=null,r=null,s=null;const o=[];for(const l of t){const a=l.indexOf(":");if(a<0)continue;const c=l.slice(0,a).trim().toLowerCase(),u=l.slice(a+1).trim();c==="box-shadow"?s=u:c==="filter"?n=u:c==="-webkit-filter"?r=u:o.push([c,u])}if(s){const l=cs(s);l&&(n=n?`${n} ${l}`:l,r=r?`${r} ${l}`:l)}const i=[...o];return n&&i.push(["filter",n]),r&&i.push(["-webkit-filter",r]),i.map(([l,a])=>`${l}:${a}`).join(";")}function us(e){return e.replace(/([^{}]+)\{([^}]*)\}/g,(t,n,r)=>`${n}{${Ve(r)}}`)}function fs(e){return e=e.replace(/<style[^>]*>([\s\S]*?)<\/style>/gi,(t,n)=>t.replace(n,us(n))),e=e.replace(/style=(['"])([\s\S]*?)\1/gi,(t,n,r)=>`style=${n}${Ve(r)}${n}`),e}function hs(e){if(!ft()||!os(e))return e;try{const t=is(e),n=fs(t);return as(n)}catch{return e}}async function Pt(e,t){let{width:n,height:r,scale:s=1,dpr:o=1,meta:i={}}=t;e=hs(e);const l=new Image;l.loading="eager",l.decoding="sync",l.crossOrigin="anonymous",l.src=e,await l.decode();const a=l.naturalWidth,c=l.naturalHeight,u=Number.isFinite(i.w0)?i.w0:a,f=Number.isFinite(i.h0)?i.h0:c;let h,m;const g=Number.isFinite(n),p=Number.isFinite(r);if(g&&p)h=Math.max(1,n),m=Math.max(1,r);else if(g){const b=n/Math.max(1,u);h=n,m=Math.round(f*b)}else if(p){const b=r/Math.max(1,f);m=r,h=Math.round(u*b)}else h=a,m=c;h=Math.round(h*s),m=Math.round(m*s);const d=document.createElement("canvas");d.width=Math.ceil(h*o),d.height=Math.ceil(m*o),d.style.width=`${h}px`,d.style.height=`${m}px`;const y=d.getContext("2d");return o!==1&&y.scale(o,o),y.drawImage(l,0,0,h,m),d}async function Xe(e,t){const n=await Pt(e,t),r=t.backgroundColor?ne(n,t.backgroundColor):n,s=new Image;return s.src=r.toDataURL(`image/${t.format}`,t.quality),await s.decode(),s.style.width=`${r.width/t.dpr}px`,s.style.height=`${r.height/t.dpr}px`,s}async function Ee(e,t){const{scale:n=1,width:r,height:s,meta:o={}}=t,i=Number.isFinite(r),l=Number.isFinite(s),a=Number.isFinite(n)&&n!==1||i||l;if(ft()&&a)return await Xe(e,{...t,format:"png",quality:1,meta:o});const c=new Image;if(c.decoding="sync",c.loading="eager",c.src=e,await c.decode(),i&&l)c.style.width=`${r}px`,c.style.height=`${s}px`;else if(i){const u=Number.isFinite(o.w0)?o.w0:c.naturalWidth,f=Number.isFinite(o.h0)?o.h0:c.naturalHeight,h=r/Math.max(1,u);c.style.width=`${r}px`,c.style.height=`${Math.round(f*h)}px`}else if(l){const u=Number.isFinite(o.w0)?o.w0:c.naturalWidth,f=Number.isFinite(o.h0)?o.h0:c.naturalHeight,h=s/Math.max(1,f);c.style.height=`${s}px`,c.style.width=`${Math.round(u*h)}px`}else{const u=Math.round(c.naturalWidth*n),f=Math.round(c.naturalHeight*n);if(c.style.width=`${u}px`,c.style.height=`${f}px`,typeof e=="string"&&e.startsWith("data:image/svg+xml"))try{const m=decodeURIComponent(e.split(",")[1]).replace(/width="[^"]*"/,`width="${u}"`).replace(/height="[^"]*"/,`height="${f}"`);e=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(m)}`,c.src=e}catch{}}return c}async function Ze(e,t){const n=t.type;if(n==="svg"){const o=decodeURIComponent(e.split(",")[1]);return new Blob([o],{type:"image/svg+xml"})}const r=await Pt(e,t),s=t.backgroundColor?ne(r,t.backgroundColor):r;return new Promise(o=>s.toBlob(i=>o(i),`image/${n}`,t.quality))}async function ds(e,t){if(t.dpr=1,t.format==="svg"){const o=await Ze(e,{...t,type:"svg"}),i=URL.createObjectURL(o),l=document.createElement("a");l.href=i,l.download=t.filename,l.click(),URL.revokeObjectURL(i);return}const n=await Pt(e,t),r=t.backgroundColor?ne(n,t.backgroundColor):n,s=document.createElement("a");s.href=r.toDataURL(`image/${t.format}`,t.quality),s.download=t.filename,s.click()}var Ye=Symbol("snapdom.internal"),Gt=!1;async function O(e,t){if(!e)throw new Error("Element cannot be null or undefined");const n=ss(t);if(ft()&&(n.embedFonts===!0||ms(e)))for(let r=0;r<3;r++)try{await ps(e,t),Gt=!1}catch{}return n.iconFonts&&n.iconFonts.length>0&&rr(n.iconFonts),n.snap||(n.snap={toPng:(r,s)=>O.toPng(r,s),toSvg:(r,s)=>O.toSvg(r,s)}),O.capture(e,n,Ye)}O.capture=async(e,t,n)=>{if(n!==Ye)throw new Error("[snapdom.capture] is internal. Use snapdom(...) instead.");const r=await qe(e,t),s=i=>({...t,...i||{}}),o=i=>l=>{const a=s({...l||{},format:i}),c=i==="jpeg"||i==="jpg",u=a.backgroundColor==null||a.backgroundColor==="transparent";return c&&u&&(a.backgroundColor="#ffffff"),Xe(r,a)};return{url:r,toRaw:()=>r,toImg:i=>Ee(r,s(i)),toSvg:i=>Ee(r,s(i)),toCanvas:i=>Pt(r,s(i)),toBlob:i=>Ze(r,s(i)),toPng:o("png"),toJpg:o("jpeg"),toWebp:o("webp"),download:i=>ds(r,s(i))}};O.toRaw=(e,t)=>O(e,t).then(n=>n.toRaw());O.toImg=(e,t)=>O(e,t).then(n=>n.toImg());O.toSvg=(e,t)=>O(e,t).then(n=>n.toSvg());O.toCanvas=(e,t)=>O(e,t).then(n=>n.toCanvas());O.toBlob=(e,t)=>O(e,t).then(n=>n.toBlob());O.toPng=(e,t)=>O(e,{...t,format:"png"}).then(n=>n.toPng());O.toJpg=(e,t)=>O(e,{...t,format:"jpeg"}).then(n=>n.toJpg());O.toWebp=(e,t)=>O(e,{...t,format:"webp"}).then(n=>n.toWebp());O.download=(e,t)=>O(e,t).then(n=>n.download());async function ps(e,t){if(Gt)return;const n={...t,fast:!0,embedFonts:!0,scale:.2};let r;try{r=await qe(e,n)}catch{return}await new Promise(s=>{const o=new Image;o.decoding="sync",o.loading="eager",o.style.position="fixed",o.style.left=0,o.style.top=0,o.style.width="10px",o.style.height="10px",o.style.opacity="0.01",o.style.transform="translateZ(10px)",o.style.willChange="transform,opacity;",o.src=r;const i=async()=>{await new Promise(l=>setTimeout(l,100)),o&&o.parentNode&&o.parentNode.removeChild(o),Gt=!0,s()};document.body.appendChild(o),i()})}function ms(e){const t=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT);for(;t.nextNode();){const n=t.currentNode,r=getComputedStyle(n),s=r.backgroundImage&&r.backgroundImage!=="none",o=r.maskImage&&r.maskImage!=="none"||r.webkitMaskImage&&r.webkitMaskImage!=="none";if(s||o)return!0}return!1}export{ws as p,O as s};
